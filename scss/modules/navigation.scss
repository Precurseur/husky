//
// Navigation
// --------------------------------------------------


// Imports
@import "compass/css3/transform";
@import "compass/css3/transition";
@import "compass/css3/user-interface";
@import "animation";


// Sizes
$navigationColumn0Width: 250px;
$navigationColumn1Width: 200px;
$navigationColumnHeight: 700px;

$navigationItem0Width: 249px;
$navigationItem1Width: 199px;
$navigationItemHeight: 50px;


// Colors
$bgNavigationColumn: #FFF;
$bgNavigationMainColumn: $baseColor;
$bgNavigationSecondColumn: #E0E0E0;

$colorNavigationColumnTitle: #999;
$colorNavigationMainColumn: #999;
$colorNavigationMainColumnHover: #000;
$colorNavigationSecondColumn: #000;
$colorNavigationSecondColumnHover: #FFF;

$bgNavigationItemHover: #E0E0E0;
$bgNavigationMainColumnItemHover: #FFF;
$bgNavigationSecondColumnItemHover: $baseColor;

// Fonts 
$navigationIconFont: $baseIconFont;


// Animations
@include keyframes(foldOut) {
    0% {
        @include transform3d(rotate3d(0, 1, 0, 100deg));
    }
    50% {
        box-shadow: 0 5px 6px 0 rgba(0, 0, 0, 0);
    }
    100% {
        @include transform3d(rotate3d(0, 1, 0, 0deg));
        box-shadow: 5px 5px 0 0 rgba(0, 0, 0, .25);
    }
}


.navigation,
.navigation ul {
    margin: 0;
    padding: 0;
    list-style: none;
}

.navigation {
    height: 100%;
    padding: 50px 5px 50px 0;

    position: fixed;
    top: 0;
    left: 0;

	z-index: 95;

    &.show-content {
        width: 210px !important;
    }
}

.navigation-columns {
    @include perspective(700px);

    height: 100%;
    white-space: nowrap;

    &.show-content {
        .navigation-column {
            width: 0;
            border-right: 0;
        }

        & > .navigation-column {
            &:first-child,
            &.second-column {
                width: 50px;
                .navigation-column-item {
                    &::before {
                        display: none;
                    }
                }
            }
        }
    }
}

.navigation-column {
    @include transition(width 0.4s ease-in-out);
    @include animation(foldOut .4s 1);
    @include transform3d(rotate3d(0, 1, 0, 0deg));
    @include backface-visibility(hidden);
    @include transform-style(preserve-3d);
    @include transform-origin(0, 50%);

    display: inline-block;
    vertical-align: top;

    width: $navigationColumn1Width;
    height: 100%;
    min-height: 300px;
    overflow: hidden;

    border-right: 1px solid $bgNavigationItemHover;
    background-color: $bgNavigationColumn;
    box-shadow: 5px 5px 0 0 rgba(0, 0, 0, .25);

    &.second-column,
    &.portals-column {
        border-right: 0;
        background-color: $bgNavigationSecondColumn;

        .navigation-column-item {
          &:hover {
            color: $colorNavigationSecondColumnHover;
            background-color: $bgNavigationSecondColumnItemHover;
            }

            &.is-loading {
                &::before {
                    background: url('../img/loader_black.gif') no-repeat center center !important;
                }
            }
        }

      .item-selected {
        .navigation-column-item {
          &.selected,
          &.selected:hover {
            color: $colorNavigationSecondColumnHover;
            background-color: $bgNavigationSecondColumnItemHover;

            a {
              color: $colorNavigationSecondColumn;
            }
          }
          &:hover {
            color: $colorNavigationSecondColumn;
            background-color: rgba($bgNavigationSecondColumnItemHover, 0.1);
          }
        }
      }
    }

    &.content-column {
        width: $navigationColumn1Width !important;
        box-shadow: 5px 5px 0 0 rgba(0, 0, 0, .25)!important;
        .navigation-column-item {
            width: 100%;
        }
    }

    &.collapsed {
        width: 50px;

        .navigation-column-item {
            &::before {
                display: none;
            }
        }
    }

    &.hide {
        width: 10px !important;

        .navigation-column-header,
        .navigation-items {
            display: none !important;
        }
    }
}

.first-column {
    width: $navigationColumn0Width;
}

.navigation-sub-columns {
    .navigation-column:not(.content-column) {
        width: 250px;

        .navigation-column-item {
            width: 249px;
        }
    }
}

.navigation-columns {
    & > .navigation-column {
        &:first-child {
            border-right: 0;
            color: $colorNavigationMainColumn;
            background-color: $bgNavigationMainColumn;

            a {
                color: $colorNavigationMainColumn;
            }

            .navigation-column-title {
                color: #fff;
            }

            .navigation-column-item {
              &:hover {
                color: $colorNavigationMainColumnHover;
                background-color: $bgNavigationMainColumnItemHover;

                    a {
                        color: $colorNavigationMainColumnHover;
                    }
                }
            }

          .item-selected {
            .navigation-column-item {
              &.selected,
              &.selected:hover {
                color: $colorNavigationMainColumnHover;
                background-color: $bgNavigationMainColumnItemHover;

                a {
                  color: $colorNavigationMainColumnHover;
                }
              }
              &:hover {
                color: $colorNavigationMainColumn;
                background-color: rgba($bgNavigationMainColumnItemHover, 0.1);
              }
            }
          }
        }
    }
}

.navigation-column-header {
    width: 100%;
    height: 100px;
    padding: 30px 20px 30px 10px;

    .navigation-header-link {
        margin-left: 10px;
        [class^="icon-"] {
            position: relative;
            top: 3px;
        }
    }

    #portal-header {
        width: 100%;

        .dropdown-toggle::after {
            top: -7px;
        }

        .dropdown-menu {
            width: 100%;

            &::after,
            &::before {
                display: none;
            }
        }
    }

}

.navigation-column:not(#column-0) {
    .navigation-column-logo {
        display: none;
    }
    .navigation-column-title {
        padding-left: 40px;
    }

    &.collapsed {
        .navigation-column-logo {
            display: block;
        }
      .navigation-column-title {
        display: none;
      }

      .dropdown-toggle {
        display: none !important;
      }
    }
}

.navigation-column-title {
    display: inline-block;
    margin-left: 40px;
    font-size: 24px;
    font-weight: normal;
    line-height: 32px;
    margin: 0;
    color: #9B9B9B;
}

.navigation-column-logo {
    display: inline-block;
    width: 26px;
    height: 26px;
    margin-right: 15px;

    & + .navigation-column-title {
        padding-left: 0;
        position: relative;
        top: -2px;
    }
}

.navigation-items {
    overflow: hidden;
}

.navigation-column-item {
    padding: 0 10px;
    width: $navigationItem1Width;
    height: $navigationItemHeight;
    margin-left: 1px;
    line-height: $navigationItemHeight;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    cursor: pointer;
    font-size: 18px;
  @include user-select(none);

  &:hover {
    background-color: $bgNavigationItemHover;
  }

    &::before {
        content: "\E224";
        display: inline-block;
        float: right;
        font-size: 12px;
        font-family: $navigationIconFont;
        font-weight: normal;
    }

    &.is-loading {
        &::before {
            content: "";
            display: inline-block;
            width: 16px;
            height: 16px;
            float: right;
            position: relative;
            top: 16px;
            background: url('../img/loader_grey.gif') no-repeat center center;
        }
    }

    &[data-has-children="true"] {
        font-weight: bold;
    }

    a {
        display: inline-block;
        width: 100%;
        text-decoration: none;
    }

    [class*="icon-"] {
        display: inline-block;
        margin: 0 20px 0 5px;
        padding: 0;
        float: left;
        font-size: 16px;
        font-family: $navigationIconFont;

        &::after {
            display: block;
        }
    }
}

.item-selected {
  .navigation-column-item {
    &.selected,
    &.selected:hover {
      background-color: $bgNavigationItemHover;
    }

    &:hover {
      background-color: rgba($bgNavigationItemHover, 0.3);
    }
  }
}

.first-column .navigation-column-item {
    width: $navigationItem0Width;
}

.navigation-sub-columns-container {
    display: inline-block;
    height: 100%;

    &.scrolling {
        box-shadow: 5px 5px 0 0 rgba(0, 0, 0, .25)!important;
        .navigation-sub-columns {
            padding-bottom: 0 !important;
            padding-right: 0 !important;
        }
    }
}

.navigation-sub-columns {
    @include perspective(900px);
    position: relative;
    left: auto;
    right: auto;
    height: 100%;
    min-height: 305px;
    overflow: hidden;
    //min-width: 250px;
    padding-bottom: 5px !important;
    padding-right: 5px !important;
    max-width: 700px;
}

.navigation-column-item {
    &[data-has-sub="true"] {
        &::before {
            content: "\E224";
        }
    }

    &.is-loading::before {
        content: "";
    }
}
