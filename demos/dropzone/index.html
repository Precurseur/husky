<!DOCTYPE html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Husky dropzone demo</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <link rel="stylesheet" href="../../dist/husky.css">
</head>
<style>
    body {
        padding: 50px 0 0 50px;
    }
</style>
<body>

<h1>Husky dropzone demo</h1>
<div class="grid">
    <div class="grid-row">
        <div class="grid-col-6">
            <div id="awsomeDropzone"
                 data-aura-component="dropzone@husky"
                 data-aura-description-key="Or click to add"
                 data-aura-title-key="Drag and drop assets here to upload"
                 data-aura-url="/upload"
                 data-aura-instance-name="pictures"></div>
        </div>
    </div>
</div>

<script src="../js/sinon.js"></script>
<script src="../js/jquery.js"></script>

<script src="../js/require.js"></script>

<script type="text/javascript">
require.config({
    baseUrl: '../../'
});

require(['lib/husky'], function(Husky) {
    'use strict';


       var  fakeServer = sinon.fakeServer.create(),
            app = Husky({ debug: { enable: true }}),
            _ = app.sandbox.util._;

    fakeServer.respondWith('POST', '/upload', [200, { 'Content-Type': 'application/json' },
        '{"total": 1, "_embedded": [{"id": 1, "name": "Picture 1", "category": "products"}]}'
    ]);

    app.start().then(function() {
        app.logger.log('Aura started...');

        app.sandbox.on('husky.dropzone.pictures.uploading', function() {
           setTimeout(function() {
               fakeServer.respond();
           }, 1000);
        });
    });


});
</script>

</body>
</html>
