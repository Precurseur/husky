var requirejs,require,define;(function(global){function isFunction(e){return ostring.call(e)==="[object Function]"}function isArray(e){return ostring.call(e)==="[object Array]"}function each(e,t){if(e){var n;for(n=0;n<e.length;n+=1)if(e[n]&&t(e[n],n,e))break}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1;n-=1)if(e[n]&&t(e[n],n,e))break}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){if(n||!hasProp(e,i))r&&typeof t!="string"?(e[i]||(e[i]={}),mixin(e[i],t,n,r)):e[i]=t}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function v(e){var t,n;for(t=0;e[t];t+=1){n=e[t];if(n===".")e.splice(t,1),t-=1;else if(n===".."){if(t===1&&(e[2]===".."||e[0]===".."))break;t>0&&(e.splice(t-1,2),t-=2)}}}function m(e,t,n){var r,i,s,u,a,f,l,c,h,p,d,m=t&&t.split("/"),g=m,y=o.map,b=y&&y["*"];e&&e.charAt(0)==="."&&(t?(getOwn(o.pkgs,t)?g=m=[t]:g=m.slice(0,m.length-1),e=g.concat(e.split("/")),v(e),i=getOwn(o.pkgs,r=e[0]),e=e.join("/"),i&&e===r+"/"+i.main&&(e=r)):e.indexOf("./")===0&&(e=e.substring(2)));if(n&&y&&(m||b)){u=e.split("/");for(a=u.length;a>0;a-=1){l=u.slice(0,a).join("/");if(m)for(f=m.length;f>0;f-=1){s=getOwn(y,m.slice(0,f).join("/"));if(s){s=getOwn(s,l);if(s){c=s,h=a;break}}}if(c)break;!p&&b&&getOwn(b,l)&&(p=getOwn(b,l),d=a)}!c&&p&&(c=p,h=d),c&&(u.splice(0,h,c),e=u.join("/"))}return e}function g(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===r.contextName)return t.parentNode.removeChild(t),!0})}function y(e){var t=getOwn(o.paths,e);if(t&&isArray(t)&&t.length>1)return g(e),t.shift(),r.require.undef(e),r.require([e]),!0}function b(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function w(e,t,n,i){var s,o,u,a,f=null,l=t?t.name:null,h=e,v=!0,g="";return e||(v=!1,e="_@r"+(p+=1)),a=b(e),f=a[0],e=a[1],f&&(f=m(f,l,i),o=getOwn(c,f)),e&&(f?o&&o.normalize?g=o.normalize(e,function(e){return m(e,l,i)}):g=m(e,l,i):(g=m(e,l,i),a=b(g),f=a[0],g=a[1],n=!0,s=r.nameToUrl(g))),u=f&&!o&&!n?"_unnormalized"+(d+=1):"",{prefix:f,name:g,parentMap:t,unnormalized:!!u,url:s,originalName:h,isDefine:v,id:(f?f+"!"+g:g)+u}}function E(e){var t=e.id,n=getOwn(u,t);return n||(n=u[t]=new r.Module(e)),n}function S(e,t,n){var r=e.id,i=getOwn(u,r);hasProp(c,r)&&(!i||i.defineEmitComplete)?t==="defined"&&n(c[r]):(i=E(e),i.error&&t==="error"?n(i.error):i.on(t,n))}function x(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=getOwn(u,t);n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function T(){globalDefQueue.length&&(apsp.apply(l,[l.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function N(e){delete u[e],delete a[e]}function C(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var s=r.id,o=getOwn(u,s);o&&!e.depMatched[i]&&!n[s]&&(getOwn(t,s)?(e.defineDep(i,c[s]),e.check()):C(o,t,n))}),n[r]=!0)}function k(){var e,n,i,u,f=o.waitSeconds*1e3,l=f&&r.startTime+f<(new Date).getTime(),c=[],h=[],p=!1,d=!0;if(t)return;t=!0,eachProp(a,function(t){e=t.map,n=e.id;if(!t.enabled)return;e.isDefine||h.push(t);if(!t.error)if(!t.inited&&l)y(n)?(u=!0,p=!0):(c.push(n),g(n));else if(!t.inited&&t.fetched&&e.isDefine){p=!0;if(!e.prefix)return d=!1}});if(l&&c.length)return i=makeError("timeout","Load timeout for modules: "+c,null,c),i.contextName=r.contextName,x(i);d&&each(h,function(e){C(e,{},{})}),(!l||u)&&p&&(isBrowser||isWebWorker)&&!s&&(s=setTimeout(function(){s=0,k()},50)),t=!1}function L(e){hasProp(c,e[0])||E(w(e[0],null,!0)).init(e[1],e[2])}function A(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function O(e){var t=e.currentTarget||e.srcElement;return A(t,r.onScriptLoad,"load","onreadystatechange"),A(t,r.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function M(){var e;T();while(l.length){e=l.shift();if(e[0]===null)return x(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));L(e)}}var t,n,r,i,s,o={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},u={},a={},f={},l=[],c={},h={},p=1,d=1;return i={require:function(e){return e.require?e.require:e.require=r.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?e.exports:e.exports=c[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){var t,n=getOwn(o.pkgs,e.map.id);return t=n?getOwn(o.config,e.map.id+"/"+n.main):getOwn(o.config,e.map.id),t||{}},exports:c[e.map.id]}}},n=function(e){this.events=getOwn(f,e.id)||{},this.map=e,this.shim=getOwn(o.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},n.prototype={init:function(e,t,n,r){r=r||{};if(this.inited)return;this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check()},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(this.fetched)return;this.fetched=!0,r.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();r.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))},load:function(){var e=this.map.url;h[e]||(h[e]=!0,r.load(this.map.id,e))},check:function(){if(!this.enabled||this.enabling)return;var e,t,n=this.map.id,i=this.depExports,s=this.exports,o=this.factory;if(!this.inited)this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{s=r.execCb(n,o,i,s)}catch(u){e=u}else s=r.execCb(n,o,i,s);this.map.isDefine&&(t=this.module,t&&t.exports!==undefined&&t.exports!==this.exports?s=t.exports:s===undefined&&this.usingExports&&(s=this.exports));if(e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",x(this.error=e)}else s=o;this.exports=s,this.map.isDefine&&!this.ignore&&(c[n]=s,req.onResourceLoad&&req.onResourceLoad(r,this.map,this.depMaps)),N(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}},callPlugin:function(){var e=this.map,t=e.id,n=w(e.prefix);this.depMaps.push(n),S(n,"defined",bind(this,function(n){var i,s,a,f=this.map.name,l=this.map.parentMap?this.map.parentMap.name:null,c=r.makeRequire(e.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){n.normalize&&(f=n.normalize(f,function(e){return m(e,l,!0)})||""),s=w(e.prefix+"!"+f,this.map.parentMap),S(s,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),a=getOwn(u,s.id),a&&(this.depMaps.push(s),this.events.error&&a.on("error",bind(this,function(e){this.emit("error",e)})),a.enable());return}i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(u,function(e){e.map.id.indexOf(t+"_unnormalized")===0&&N(e.map.id)}),x(e)}),i.fromText=bind(this,function(n,s){var u=e.name,a=w(u),f=useInteractive;s&&(n=s),f&&(useInteractive=!1),E(a),hasProp(o.config,t)&&(o.config[u]=o.config[t]);try{req.exec(n)}catch(l){return x(makeError("fromtexteval","fromText eval for "+t+" failed: "+l,l,[t]))}f&&(useInteractive=!0),this.depMaps.push(a),r.completeLoad(u),c([u],i)}),n.load(e.name,c,i,o)})),r.enable(n,this),this.pluginMaps[n.id]=n},enable:function(){a[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,s,o;if(typeof e=="string"){e=w(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,o=getOwn(i,e.id);if(o){this.depExports[t]=o(this);return}this.depCount+=1,S(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&S(e,"error",bind(this,this.errback))}n=e.id,s=u[n],!hasProp(i,n)&&s&&!s.enabled&&r.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(u,e.id);t&&!t.enabled&&r.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),e==="error"&&delete this.events[e]}},r={config:o,contextName:e,registry:u,defined:c,urlFetched:h,defQueue:l,Module:n,makeModuleMap:w,nextTick:req.nextTick,onError:x,configure:function(e){e.baseUrl&&e.baseUrl.charAt(e.baseUrl.length-1)!=="/"&&(e.baseUrl+="/");var t=o.pkgs,n=o.shim,i={paths:!0,config:!0,map:!0};eachProp(e,function(e,t){i[t]?t==="map"?(o.map||(o.map={}),mixin(o[t],e,!0,!0)):mixin(o[t],e,!0):o[t]=e}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),(e.exports||e.init)&&!e.exportsFn&&(e.exportsFn=r.makeShimExports(e)),n[t]=e}),o.shim=n),e.packages&&(each(e.packages,function(e){var n;e=typeof e=="string"?{name:e}:e,n=e.location,t[e.name]={name:e.name,location:n||e.name,main:(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),o.pkgs=t),eachProp(u,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=w(t))}),(e.deps||e.callback)&&r.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,n){function s(o,a,f){var l,h,p;return n.enableBuildCallback&&a&&isFunction(a)&&(a.__requireJsBuild=!0),typeof o=="string"?isFunction(a)?x(makeError("requireargs","Invalid require call"),f):t&&hasProp(i,o)?i[o](u[t.id]):req.get?req.get(r,o,t,s):(h=w(o,t,!1,!0),l=h.id,hasProp(c,l)?c[l]:x(makeError("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(M(),r.nextTick(function(){M(),p=E(w(null,t)),p.skipMap=n.skipMap,p.init(o,a,f,{enabled:!0}),k()}),s)}return n=n||{},mixin(s,{isBrowser:isBrowser,toUrl:function(e){var n,i=e.lastIndexOf("."),s=e.split("/")[0],o=s==="."||s==="..";return i!==-1&&(!o||i>1)&&(n=e.substring(i,e.length),e=e.substring(0,i)),r.nameToUrl(m(e,t&&t.id,!0),n,!0)},defined:function(e){return hasProp(c,w(e,t,!1,!0).id)},specified:function(e){return e=w(e,t,!1,!0).id,hasProp(c,e)||hasProp(u,e)}}),t||(s.undef=function(e){T();var n=w(e,t,!0),r=getOwn(u,e);delete c[e],delete h[n.url],delete f[e],r&&(r.events.defined&&(f[e]=r.events),N(e))}),s},enable:function(e){var t=getOwn(u,e.id);t&&E(e).enable()},completeLoad:function(e){var t,n,r,i=getOwn(o.shim,e)||{},s=i.exports;T();while(l.length){n=l.shift();if(n[0]===null){n[0]=e;if(t)break;t=!0}else n[0]===e&&(t=!0);L(n)}r=getOwn(u,e);if(!t&&!hasProp(c,e)&&r&&!r.inited){if(o.enforceDefine&&(!s||!getGlobal(s))){if(y(e))return;return x(makeError("nodefine","No define call for "+e,null,[e]))}L([e,i.deps||[],i.exportsFn])}k()},nameToUrl:function(e,t,n){var r,i,s,u,a,f,l,c,h;if(req.jsExtRegExp.test(e))c=e+(t||"");else{r=o.paths,i=o.pkgs,a=e.split("/");for(f=a.length;f>0;f-=1){l=a.slice(0,f).join("/"),s=getOwn(i,l),h=getOwn(r,l);if(h){isArray(h)&&(h=h[0]),a.splice(0,f,h);break}if(s){e===s.name?u=s.location+"/"+s.main:u=s.location,a.splice(0,f,u);break}}c=a.join("/"),c+=t||(/\?/.test(c)||n?"":".js"),c=(c.charAt(0)==="/"||c.match(/^[\w\+\.\-]+:/)?"":o.baseUrl)+c}return o.urlArgs?c+((c.indexOf("?")===-1?"?":"&")+o.urlArgs):c},load:function(e,t){req.load(r,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if(e.type==="load"||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=O(e);r.completeLoad(t.id)}},onScriptError:function(e){var t=O(e);if(!y(t.id))return x(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},r.require=r.makeRequire(),r}function getInteractiveScript(){return interactiveScript&&interactiveScript.readyState==="interactive"?interactiveScript:(eachReverse(scripts(),function(e){if(e.readyState==="interactive")return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.8",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=typeof window!="undefined"&&!!navigator&&!!window.document,isWebWorker=!isBrowser&&typeof importScripts!="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!="undefined"&&opera.toString()==="[object Opera]",contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(typeof define!="undefined")return;if(typeof requirejs!="undefined"){if(isFunction(requirejs))return;cfg=requirejs,requirejs=undefined}typeof require!="undefined"&&!isFunction(require)&&(cfg=require,require=undefined),req=requirejs=function(e,t,n,r){var i,s,o=defContextName;return!isArray(e)&&typeof e!="string"&&(s=e,isArray(t)?(e=t,t=n,n=r):e=[]),s&&s.context&&(o=s.context),i=getOwn(contexts,o),i||(i=contexts[o]=req.s.newContext(o)),s&&i.configure(s),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=typeof setTimeout!="undefined"?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,t,n){var r=e&&e.config||{},i;if(isBrowser)return i=req.createNode(r,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),i.attachEvent&&!(i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0)&&!isOpera?(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)):(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(s){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,s,[t]))}},isBrowser&&eachReverse(scripts(),function(e){head||(head=e.parentNode),dataMain=e.getAttribute("data-main");if(dataMain)return mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,n){var r,i;typeof e!="string"&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(n.length===1?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),(i?i.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)})(this),define("requirejs",function(){}),define("vendor/aura/lib/platform",[],function(){typeof Function.prototype.bind!="function"&&(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments,1);return function(){return t.apply(e,Array.prototype.concat.apply(n,arguments))}}),typeof Array.isArray!="function"&&(Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"}),Object.create||(Object.create=function(e){function t(){}if(arguments.length>1)throw new Error("Object.create implementation only accepts the first parameter.");return t.prototype=e,new t}),Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if(typeof i!="object"&&typeof i!="function"||i===null)throw new TypeError("Object.keys called on non-object");var s=[];for(var o in i)e.call(i,o)&&s.push(o);if(t)for(var u=0;u<r;u++)e.call(i,n[u])&&s.push(n[u]);return s}}())}),function(){window.jQuery?define("jquery",[],function(){return window.jQuery}):require.config({paths:{jquery:"bower_components/jquery/jquery"},shim:{jquery:{exports:"$"}}}),window._?define("underscore",[],function(){return window._}):require.config({paths:{underscore:"bower_components/underscore/underscore"},shim:{underscore:{exports:"_"}}}),define("vendor/aura/lib/base",["module","underscore","jquery","./platform"],function(e,t,n,r){require.s.contexts._.config.paths.aura||require.config({paths:{aura:e.id.replace(/base$/,"")}});var i={};return i.dom={find:function(e,t){return t=t||document,n(t).find(e)},data:function(e,t){return n(e).data(t)}},i.data={deferred:n.Deferred,when:n.when},i.util={each:n.each,extend:n.extend,uniq:t.uniq,_:t,decamelize:function(e,t){return t=t===undefined?"_":t,e.replace(/([A-Z])/g,t+"$1").toLowerCase()}},i.events={listen:function(e,t,r,i){return n(e).on(t,r,i)},bindAll:function(){return t.bindAll.apply(this,arguments)}},i.template={parse:t.template},i})}(),define("vendor/aura/lib/logger",[],function(){function n(t){return this.name=t,this._log=e,this._warn=e,this._error=e,this}var e=function(){},t=window.console||{};return n.prototype.setName=function(e){this.name=e},n.prototype.enable=function(){this._log=t.log||e,this._warn=t.warn||this._log,this._error=t.error||this._log;if(Function.prototype.bind&&typeof t=="object"){var n=["log","warn","error"];for(var r=0;r<n.length;r++)t[n[r]]=Function.prototype.call.bind(t[n[r]],t)}return this},n.prototype.write=function(e,n){var r=Array.prototype.slice.call(n);r.unshift(this.name+":"),e.apply(t,r)},n.prototype.log=function(){this.write(this._log,arguments)},n.prototype.warn=function(){this.write(this._warn,arguments)},n.prototype.error=function(){this.write(this._error,arguments)},n}),define("vendor/aura/lib/aura.extensions",["./base","./logger"],function(e,t){function u(){return this._extensions=[],this.initStatus=i(),this}function a(){var e=r.call(arguments),t;for(var n=0,i=e.length;n<i;n++){t=e[n];if(typeof t=="function")return t}return function(){}}function f(e){return typeof e=="function"?e.apply(undefined,r.call(arguments,1)):e}function l(e){var t=i(),n=e.ref,r=e.context,o=c(n,r);return o.fail(t.reject),o.done(function(e){if(!e)return t.resolve();var n=s(a(e,e.initialize)(r));n.done(function(){t.resolve(e)}),n.fail(t.reject)}),t.promise()}function c(e,t){var n=i(),r=function(e){e=f(e,t);if(e&&e.require&&e.require.paths){var r=Object.keys(e.require.paths)||[];require.config(e.require),require(r,function(){n.resolve(e)},s)}else n.resolve(e)},s=function(t){o.error("Error loading ext:",e,t),n.reject(t)};return typeof e=="string"?require([e],r,s):r(e),n}var n=e.util._,r=Array.prototype.slice,i=e.data.deferred,s=e.data.when,o=(new t("Extensions")).enable();return u.prototype.add=function(e){if(n.include(this._extensions,e)){var t=e.ref.toString()+" is already registered.";throw t+="Extensions can only be added once.",new Error(t)}if(this.initStarted)throw new Error("Init extensions already called");return this._extensions.push(e),this},u.prototype.onReady=function(e){return this.initStatus.then(e),this},u.prototype.onFailure=function(e){return this.initStatus.fail(e),this},u.prototype.init=function(){if(this.initStarted)throw new Error("Init extensions already called");this.initStarted=!0;var e=n.compact(this._extensions.slice(0)),t=[],r=this.initStatus;return function i(n){if(n){var o=l(n);t.push(o),o.done(function(){i(e.shift())}),o.fail(function(e){e||(e="Unknown error while loading an extension"),e instanceof Error||(e=new Error(e)),r.reject(e)})}else e.length===0&&s.apply(undefined,t).done(function(){r.resolve(Array.prototype.slice.call(arguments))})}(e.shift()),r.promise()},u}),define("vendor/aura/lib/aura",["./base","./aura.extensions","./logger"],function(e,t,n){function o(i){function l(e){typeof e=="string"&&(e=u.sandboxes.get(e));if(e){var t=["aura","sandbox","stop"].join(u.config.mediator.delimiter);return r.invoke(e._children,"stop"),u.core.mediator.emit(t,e),e._component&&e._component.invokeWithCallbacks("remove"),e.stopped=!0,e.el&&u.core.dom.find(e.el).remove(),a[e.ref]=null,delete a[e.ref],e}}if(this instanceof o){var s=new t,u=this;u.ref=r.uniqueId("aura_"),u.config=i=i||{},u.config.sources=u.config.sources||{"default":"./aura_components"};var a={},f=Object.create(e);u.sandboxes={},u.sandboxes.create=function(e,t){e=e||r.uniqueId("sandbox-");if(a[e])throw new Error("Sandbox with ref "+e+" already exists.");var s=Object.create(f);s.ref=e||r.uniqueId("sandbox-"),s.logger=new n(s.ref),a[s.ref]=s;var o=i.debug;return(o===!0||o.enable&&(o.components.length===0||o.components.indexOf(e)!==-1))&&s.logger.enable(),r.extend(s,t||{}),s},u.sandboxes.get=function(e){return a[e]},u.use=function(e){return s.add({ref:e,context:u}),u},u.components={},u.components.addSource=function(e,t){if(i.sources[e])throw new Error("Components source '"+e+"' is already registered");return i.sources[e]=t,u},u.core=Object.create(e),u.start=function(t){if(u.started)return u.logger.error("Aura already started!"),s.initStatus;u.logger.log("Starting Aura");var n=t||{};return typeof t=="string"?n={components:u.core.dom.find(t)}:Array.isArray(t)?n={components:t}:t&&t.widgets&&!t.components?n.components=t.widgets:n.components===undefined&&(n.components=u.core.dom.find(u.config.components||"body")),s.onReady(function(t){e.util.each(t,function(e,t){t&&typeof t.afterAppStart=="function"&&t.afterAppStart(u)})}),s.onFailure(function(){u.logger.error("Error initializing app:",u.config.name,arguments),u.stop()}),u.startOptions=n,u.started=!0,s.init()},u.stop=function(){u.started=!1},u.sandbox=f,u.logger=new n(u.ref),u.sandbox.stop=function(e){e?u.core.dom.find(e,this.el).each(function(e,t){var n=u.core.dom.find(t).data("__sandbox_ref__");l(n)}):l(this)},i.debug=i.debug||{};var c=i.debug;return c.enable&&(c.components?c.components=c.components.split(" "):c.components=[],u.logger.enable(),u.use("aura/ext/debug")),u.use("aura/ext/mediator"),u.use("aura/ext/components"),u}return new o(i)}var r=e.util._,i=function(){},s=Object.freeze||i;return o}),define("husky",["vendor/aura/lib/aura"],function(e){function t(n){if(!(this instanceof t))return new t(n);e.call(this,n);var r=this;r.components.addSource("husky","./husky_components"),r.use("./husky_extensions/jquery"),r.use("./husky_extensions/backbone"),r.use("./husky_extensions/collection"),r.use("./husky_extensions/model"),r.use("./husky_extensions/husky-validation"),r.use("./husky_extensions/util"),r.use("./husky_extensions/template"),r.use("./husky_extensions/globalize")}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t}),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.0.0";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=u.uniqueId("l"));return i[s]=t,typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(t,d)),t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t;if(r&&(!n||!n.wait)&&!this.set(r,n))return!1;n=u.extend({validate:!0},n);if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},j(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;j(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||B();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t||{},{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];u.each(v,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var m=o.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};u.extend(m.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.defaults(t||{},y))},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},set:function(e,t){t=u.defaults(t||{},g),t.parse&&(e=this.parse(e,t)),u.isArray(e)||(e=e?[e]:[]);var n,i,o,a,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=u.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(e[n],t)))continue;(f=this.get(o))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(o.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o))}if(t.remove){for(n=0,i=this.length;n<i;++n)m[(o=this.models[n]).cid]||v.push(o);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?s.apply(this.models,[c,0].concat(d)):r.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=d.length;n<i;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(b,function(e){m.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var w=["groupBy","countBy","sortBy"];u.each(w,function(e){m.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var E=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];u.extend(E.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(S),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,x)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||B()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var H=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=m.extend=N.extend=E.extend=O.extend=H;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),define("backbone",["underscore","jquery"],function(e){return function(){var t,n;return t||e.Backbone}}(this)),define("text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.10",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}d.isBuild=i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i.indexOf("﻿")===0&&(i=i.substring(1)),t(i)}catch(s){r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("aura/ext/debug",[],function(){return{name:"debug",initialize:function(e){typeof window.attachDebugger=="function"&&(e.logger.log("Attaching debugger ..."),window.attachDebugger(e))}}}),!function(e,t){function i(){this._events={},this._conf&&s.call(this,this._conf)}function s(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners&&(this._events.maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),this.wildcard&&(this.listenerTree={}))}function o(e){this._events={},this.newListener=!1,s.call(this,e)}function u(e,t,n,r){if(!n)return[];var i=[],s,o,a,f,l,c,h,p=t.length,d=t[r],v=t[r+1];if(r===p&&n._listeners){if(typeof n._listeners=="function")return e&&e.push(n._listeners),[n];for(s=0,o=n._listeners.length;s<o;s++)e&&e.push(n._listeners[s]);return[n]}if(d==="*"||d==="**"||n[d]){if(d==="*"){for(a in n)a!=="_listeners"&&n.hasOwnProperty(a)&&(i=i.concat(u(e,t,n[a],r+1)));return i}if(d==="**"){h=r+1===p||r+2===p&&v==="*",h&&n._listeners&&(i=i.concat(u(e,t,n,p)));for(a in n)a!=="_listeners"&&n.hasOwnProperty(a)&&(a==="*"||a==="**"?(n[a]._listeners&&!h&&(i=i.concat(u(e,t,n[a],p))),i=i.concat(u(e,t,n[a],r))):a===v?i=i.concat(u(e,t,n[a],r+2)):i=i.concat(u(e,t,n[a],r)));return i}i=i.concat(u(e,t,n[d],r+1))}f=n["*"],f&&u(e,t,f,r+1),l=n["**"];if(l)if(r<p){l._listeners&&u(e,t,l,p);for(a in l)a!=="_listeners"&&l.hasOwnProperty(a)&&(a===v?u(e,t,l[a],r+2):a===d?u(e,t,l[a],r+1):(c={},c[a]=l[a],u(e,t,{"**":c},r+1)))}else l._listeners?u(e,t,l,p):l["*"]&&l["*"]._listeners&&u(e,t,l["*"],p);return i}function a(e,t){e=typeof e=="string"?e.split(this.delimiter):e.slice();for(var i=0,s=e.length;i+1<s;i++)if(e[i]==="**"&&e[i+1]==="**")return;var o=this.listenerTree,u=e.shift();while(u){o[u]||(o[u]={}),o=o[u];if(e.length===0){if(!o._listeners)o._listeners=t;else if(typeof o._listeners=="function")o._listeners=[o._listeners,t];else if(n(o._listeners)){o._listeners.push(t);if(!o._listeners.warned){var a=r;typeof this._events.maxListeners!="undefined"&&(a=this._events.maxListeners),a>0&&o._listeners.length>a&&(o._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",o._listeners.length),console.trace())}}return!0}u=e.shift()}return!0}var n=Array.isArray?Array.isArray:function(t){return Object.prototype.toString.call(t)==="[object Array]"},r=10;o.prototype.delimiter=".",o.prototype.setMaxListeners=function(e){this._events||i.call(this),this._events.maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e},o.prototype.event="",o.prototype.once=function(e,t){return this.many(e,1,t),this},o.prototype.many=function(e,t,n){function i(){--t===0&&r.off(e,i),n.apply(this,arguments)}var r=this;if(typeof n!="function")throw new Error("many only accepts instances of Function");return i._origin=n,this.on(e,i),r},o.prototype.emit=function(){this._events||i.call(this);var e=arguments[0];if(e==="newListener"&&!this.newListener&&!this._events.newListener)return!1;if(this._all){var t=arguments.length,n=new Array(t-1);for(var r=1;r<t;r++)n[r-1]=arguments[r];for(r=0,t=this._all.length;r<t;r++)this.event=e,this._all[r].apply(this,n)}if(e==="error"&&!this._all&&!this._events.error&&(!this.wildcard||!this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var s;if(this.wildcard){s=[];var o=typeof e=="string"?e.split(this.delimiter):e.slice();u.call(this,s,o,this.listenerTree,0)}else s=this._events[e];if(typeof s=="function"){this.event=e;if(arguments.length===1)s.call(this);else if(arguments.length>1)switch(arguments.length){case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:var t=arguments.length,n=new Array(t-1);for(var r=1;r<t;r++)n[r-1]=arguments[r];s.apply(this,n)}return!0}if(s){var t=arguments.length,n=new Array(t-1);for(var r=1;r<t;r++)n[r-1]=arguments[r];var a=s.slice();for(var r=0,t=a.length;r<t;r++)this.event=e,a[r].apply(this,n);return a.length>0||this._all}return this._all},o.prototype.on=function(e,t){if(typeof e=="function")return this.onAny(e),this;if(typeof t!="function")throw new Error("on only accepts instances of Function");this._events||i.call(this),this.emit("newListener",e,t);if(this.wildcard)return a.call(this,e,t),this;if(!this._events[e])this._events[e]=t;else if(typeof this._events[e]=="function")this._events[e]=[this._events[e],t];else if(n(this._events[e])){this._events[e].push(t);if(!this._events[e].warned){var s=r;typeof this._events.maxListeners!="undefined"&&(s=this._events.maxListeners),s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}}return this},o.prototype.onAny=function(e){this._all||(this._all=[]);if(typeof e!="function")throw new Error("onAny only accepts instances of Function");return this._all.push(e),this},o.prototype.addListener=o.prototype.on,o.prototype.off=function(e,t){if(typeof t!="function")throw new Error("removeListener only takes instances of Function");var r,i=[];if(this.wildcard){var s=typeof e=="string"?e.split(this.delimiter):e.slice();i=u.call(this,null,s,this.listenerTree,0)}else{if(!this._events[e])return this;r=this._events[e],i.push({_listeners:r})}for(var o=0;o<i.length;o++){var a=i[o];r=a._listeners;if(n(r)){var f=-1;for(var l=0,c=r.length;l<c;l++)if(r[l]===t||r[l].listener&&r[l].listener===t||r[l]._origin&&r[l]._origin===t){f=l;break}if(f<0)continue;return this.wildcard?a._listeners.splice(f,1):this._events[e].splice(f,1),r.length===0&&(this.wildcard?delete a._listeners:delete this._events[e]),this}if(r===t||r.listener&&r.listener===t||r._origin&&r._origin===t)this.wildcard?delete a._listeners:delete this._events[e]}return this},o.prototype.offAny=function(e){var t=0,n=0,r;if(e&&this._all&&this._all.length>0){r=this._all;for(t=0,n=r.length;t<n;t++)if(e===r[t])return r.splice(t,1),this}else this._all=[];return this},o.prototype.removeListener=o.prototype.off,o.prototype.removeAllListeners=function(e){if(arguments.length===0)return!this._events||i.call(this),this;if(this.wildcard){var t=typeof e=="string"?e.split(this.delimiter):e.slice(),n=u.call(this,null,t,this.listenerTree,0);for(var r=0;r<n.length;r++){var s=n[r];s._listeners=null}}else{if(!this._events[e])return this;this._events[e]=null}return this},o.prototype.listeners=function(e){if(this.wildcard){var t=[],r=typeof e=="string"?e.split(this.delimiter):e.slice();return u.call(this,t,r,this.listenerTree,0),t}return this._events||i.call(this),this._events[e]||(this._events[e]=[]),n(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},o.prototype.listenersAny=function(){return this._all?this._all:[]},typeof define=="function"&&define.amd?define("eventemitter",[],function(){return o}):e.EventEmitter2=o}(typeof process!="undefined"&&typeof process.title!="undefined"&&typeof exports!="undefined"?exports:window),define("aura/ext/mediator",["eventemitter","underscore"],function(){return{name:"mediator",require:{paths:{eventemitter:"bower_components/eventemitter2/lib/eventemitter2",underscore:"bower_components/underscore/underscore"},shim:{underscore:{exports:"_"}}},initialize:function(e){var t=require("eventemitter"),n=require("underscore");e.config.mediator=n.defaults(e.config.mediator||{},{wildcard:!0,delimiter:".",newListener:!0,maxListeners:20});var r=new t(e.config.mediator);e.core.mediator=r;var i=function(t){return function(i,s,o){if(!n.isFunction(s)||!n.isString(i))throw new Error("Invalid arguments passed to sandbox."+t);o=o||this;var u=function(){var t=Array.prototype.slice.call(arguments);try{s.apply(o,t)}catch(n){console.warn("App logger: ",e.logger),e.logger.error("Error caught in listener '"+i+"', called with arguments: ",t,"\nError:",n.message,n,t)}};this._events=this._events||[],this._events.push({name:i,listener:s,callback:u}),r[t](i,u)}};e.sandbox.on=i("on"),e.sandbox.once=i("once"),e.sandbox.off=function(e,t){if(!this._events)return;this._events=n.reject(this._events,function(n){var i=n.name===e&&n.listener===t;return i&&r.off(e,n.callback),i})},e.sandbox.emit=function(){var t=e.config.debug;if(t.enable&&(t.components.length===0||t.components.indexOf("aura:mediator")!==-1)){var n=Array.prototype.slice.call(arguments);n.unshift("Event emitted"),e.logger.log.apply(e.logger,n)}r.emit.apply(r,arguments)},e.sandbox.stopListening=function(){if(!this._events)return;n.each(this._events,function(e){r.off(e.name,e.callback)})};var s=["aura","sandbox","stop"].join(e.config.mediator.delimiter);e.core.mediator.on(s,function(e){e.stopListening()})}}}),define("aura/ext/components",[],function(){return function(e){function o(t,n,r,i){var o=s[t+":"+n]||[],u=[];e.core.util.each(o,function(e,t){typeof t=="function"&&u.push(t.apply(r,i))});var a=e.core.data.when.apply(undefined,u).promise();return a}function u(t,n){var r;if(typeof t=="string")r=t,t=n[r]||function(){};else{if(typeof t.name!="string")throw new Error("Error invoking Component with callbacks: ",n.options.name,". first argument should be either the name of a function or of the form : { name: 'fnName', fn: function() { ... } } ");r=t.name,t=t.fn||function(){}}var i=e.core.data.deferred(),s,u,a=[].slice.call(arguments,2);s=o("before",r,n,a);var f;return s.then(function(){var e=t.apply(n,a);return e}).then(function(){o("after",r,n,a).then(function(){i.resolve(f)},i.reject)}).fail(function(t){e.logger.error("Error in Component "+n.options.name+" "+r+" callback",t),i.reject(t)}),i.promise()}function a(e){var t=r.clone(e);return this.options=r.defaults(t||{},this.options||{}),this._ref=t._ref,this.$el=n.dom.find(t.el),u("initialize",this,this.options),this}function l(e,t,i){var s=r.clone(i||{});s.el=e,s.require={};var o,u=n.dom.data(e);return n.util.each(u,function(e,n){e=e.replace(new RegExp("^"+t),""),e=e.charAt(0).toLowerCase()+e.slice(1),e!=="component"&&e!=="widget"?s[e]=n:o=n}),c(o,s)}function c(t,r){var i=t.split("@"),s=n.util.decamelize(i[0]),o=i[1]||"default",u=require.s.contexts._,a=e.config.sources[o]||"./aura_components";return r.name=s,r.ref="__component__$"+s+"@"+o,r.baseUrl=a+"/"+s,r.require=r.require||{},r.require.packages=r.require.packages||[],r.require.packages.push({name:r.ref,location:a+"/"+s}),r}var t=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n=e.core,r=e.core.util._;n.Components=n.Components||{};var i={},s={};a.prototype.initialize=function(){},a.prototype.html=function(e){var t=this.$el;t.html(e);var n=this;return r.defer(function(){n.sandbox.start(t,{reset:!0})}),this},a.prototype.$find=function(e){return this.$el.find(e)},a.prototype.invokeWithCallbacks=function(e){u(e,this)};var f=function(e,r){var i=this,s;e&&t(e,"constructor")?s=e.constructor:s=function(){i.apply(this,arguments)},n.util.extend(s,i,r);var o=function(){this.constructor=s};return o.prototype=i.prototype,s.prototype=new o,e&&n.util.extend(s.prototype,e),s.__super__=i.prototype,s};return a.extend=f,a.load=function(t,s){var o=n.data.deferred(),u=s.ref,f,l,c=s.el;s._ref=n.util._.uniqueId(u+"+");var h=r.clone(s);return e.logger.log("Start loading component:",t),o.fail(function(n){e.logger.error("Error loading component:",t,n)}),require.config(h.require),require([u],function(r){if(!r)return o.reject("component "+u+" Definition is empty !");try{if(i[u])l=i[u];else{r.type?l=n.Components[r.type]:l=a;if(!l)throw new Error("Can't find component of type '"+r.type+"', did you forget to include the extension that provides it ?");n.util._.isObject(r)&&(l=i[u]=l.extend(r))}var f=e.sandboxes.create(s._ref,{el:c});f.logger.setName("Component '"+t+"'("+f.logger.name+")");var p={sandbox:f};typeof r=="function"&&(p.initialize=r),l=l.extend(p);var d=new l(h);d.$el.data("__sandbox_ref__",f.ref);var v=n.data.when(d);return v.then(function(e){o.resolve(e)}),v.fail(function(e){o.reject(e)}),v}catch(m){e.logger.error(m.message),o.reject(m)}},function(e){o.reject(e)}),o.promise()},a.parseList=function(t){var i=[];if(Array.isArray(t))r.map(t,function(e){var t=c(e.name,e.options);i.push({name:e.name,options:t})});else if(t&&n.dom.find(t)){var s=e.config.namespace,o=["[data-aura-component]","[data-aura-widget]"];s&&(o.push("[data-"+s+"-component]"),o.push("[data-"+s+"-widget]")),o=o.join(","),n.dom.find(o,t||"body").each(function(){var e="aura";s&&(this.getAttribute("data-"+s+"-component")||this.getAttribute("data-"+s+"-widget"))&&(e=s);var t=l(this,e);i.push({name:t.name,options:t})})}return i},a.startAll=function(e){var t=a.parseList(e),r=[];n.util.each(t,function(e,t){var n=a.load(t.name,t.options);r.push(n)});var i=n.data.when.apply(undefined,r);return i.promise()},{name:"components",require:{paths:{text:"bower_components/requirejs-text/text"}},initialize:function(e){function t(e,t){s[e]=s[e]||[],s[e].push(t)}e.core.Components.Base=a,e.components.before=function(e,n){var r="before:"+e;t(r,n)},e.components.after=function(e,n){var r="after:"+e;t(r,n)},e.components.addType=function(t,n){if(e.core.Components[t])throw new Error("Component type "+t+" already defined");e.core.Components[t]=a.extend(n)},e.sandbox.start=function(t,n){var i=["aura","sandbox","start"].join(e.config.mediator.delimiter);e.core.mediator.emit(i,this);var s=this._children||[];n&&n.reset&&(r.invoke(this._children||[],"stop"),s=[]);var o=this;return a.startAll(t).done(function(){var e=Array.prototype.slice.call(arguments);r.each(e,function(e){e.sandbox._component=e,e.sandbox._parent=o,s.push(e.sandbox)}),o._children=s}),this}},afterAppStart:function(e){if(e.config.components!==!1&&e.startOptions.components!==!1){var t;Array.isArray(e.startOptions.components)?t=n.dom.find("body"):t=n.dom.find(e.startOptions.components),e.core.appSandbox=e.sandboxes.create(e.ref,{el:t}),e.core.appSandbox.start(e.startOptions.components)}}}}}),define("form/util",[],function(){var e=["form","validation"];return{debugEnabled:!1,getFields:function(e){return $(e).find('input:not([data-form="false"], [type="submit"], [type="button"]), textarea:not([data-form="false"]), select:not([data-form="false"]), *[data-form="true"]')},parseData:function(e,t,n){var r=$(e);return this.buildOptions(r.data(),t,"",n)},buildOptions:function(t,n,r,i){r||(r=""),i||(i={});var s=$.extend({},i,{}),o=n+this.ucFirst(r);return $.each(t,function(t,r){var i=new RegExp("^"+o);i.test(t)&&$.inArray(t,e)===-1&&(t!==o?t=t.replace(i,""):t=t.replace(new RegExp("^"+n),""),t!==""&&(t=this.lcFirst(t),s[t]=r))}.bind(this)),s},debug:function(e,t,n){!this.debugEnabled||(e?t?n?console.log("Husky Validation:",e,t,n):console.log("Husky Validation:",e,t):console.log("Husky Validation:",e):console.log("Husky Validation"))},ucFirst:function(e){e+="";var t=e.charAt(0).toUpperCase();return t+e.substr(1)},lcFirst:function(e){return e.charAt(0).toLowerCase()+e.slice(1)},startsWith:function(e,t){return e.indexOf(t)===0},print:function(e,t){t||(t=1);var n="",r="&nbsp;&nbsp;&nbsp;&nbsp;",i,s,o="",u=0;while(u<t)o+=r,u++;for(i in e)e.hasOwnProperty(i)&&(s=e[i],typeof s=="string"?this.isNumeric(s)?n+=o+i+": "+s+"; </br>":(s.length>7&&(s=s.substring(0,6)+" ..."),n+=o+i+": '"+s+"'; </br>"):n+=o+i+": { </br>"+o+r+print(s,t++)+"}");return n},isNumeric:function(e){return e.match(/-?\d+(.\d+)?/)}}}),define("form/element",["form/util"],function(e){return function(t,n,r){var i={type:"string",validationTrigger:"focusout",validationAddClasses:!0,validationAddClassesParent:!0,validationSuccessClass:"husky-validate-success",validationErrorClass:"husky-validate-error",validationClass:"husky-validate",validation:!0},s=["validation","validationTrigger","validationAddClasses","validationAddClassesParent","validationClass","validationSuccessClass","validationErrorClass","validationSubmitEvent"],o,u={},a,f=null,l=null,c={initialize:function(){l=$.Deferred(),this.requireCounter=0,this.initialized=l.promise(),this.$el=$(t),this.$el.data("element",this),this.options=$.extend({},i,r),!this.options.validationAddClasses||this.$el.addClass(this.options.validationClass),!this.options.validation||c.initValidation.call(this)},resolveInitialization:function(){this.requireCounter--,this.requireCounter===0&&l.resolve()},initValidation:function(){c.bindValidationDomEvents.call(this),c.initValidators.call(this),c.initType.call(this)},bindValidationDomEvents:function(){var e=this.options.validationTrigger?this.options.validationTrigger:"";if(e===""||e==="none")return;this.$el.is("select")&&(e+=(new RegExp("change","i")).test(e)?"":" change"),e=e.replace(/^\s+/g,"").replace(/\s+$/g,""),this.$el.bind(e,this.validate.bind(this))},initValidators:function(){$.each(this.options,function(t,r){if(!!r&&$.inArray(t,s)===-1&&e.startsWith(t,"validation")){var i=e.lcFirst(t.replace("validation",""));this.requireCounter++,require(["validator/"+i],function(r){var s=e.buildOptions(this.options,"validation",i);u[i]=new r(this.$el,n,s),e.debug("Element Validator",t,s),c.resolveInitialization.call(this)}.bind(this))}}.bind(this))},initType:function(){!this.options.type||(this.requireCounter++,require(["type/"+this.options.type],function(t){var n=e.buildOptions(this.options,"type");a=new t(this.$el,n),e.debug("Element Type",a,n),c.resolveInitialization.call(this)}.bind(this)))},hasConstraints:function(){return Object.keys(u).length>0||a!==null&&a.needsValidation()},needsValidation:function(){return f!==this.$el.val()},reset:function(){var e=this.$el;!this.options.validationAddClassesParent||(e=e.parent()),e.removeClass(this.options.validationSuccessClass),e.removeClass(this.options.validationErrorClass)},setValid:function(e){o=e;if(!!this.options.validationAddClasses){c.reset.call(this);var t=this.$el;!this.options.validationAddClassesParent||(t=t.parent()),e?t.addClass(this.options.validationSuccessClass):t.addClass(this.options.validationErrorClass)}}},h={validate:function(e){if(e||c.needsValidation.call(this)){if(!c.hasConstraints.call(this))return c.reset.call(this),!0;var t=!0;$.each(u,function(e,n){n.validate()||(t=!1)}),a!==null&&!a.validate()&&(t=!1),c.setValid.call(this,t)}return this.isValid()},isValid:function(){return o},updateConstraint:function(e,t){if(!($.inArray(e,Object.keys(u))>-1))throw"No constraint with name: "+e;u[e].updateConstraint(t),this.validate()},deleteConstraint:function(e){if(!($.inArray(e,Object.keys(u))>-1))throw"No constraint with name: "+e;delete u[e],this.validate(!0)},addConstraint:function(e,t){if($.inArray(e,Object.keys(u))!==-1)throw"Constraint with name: "+e+" already exists";require(["validator/"+e],function(r){u[e]=new r(this.$el,n,t)}.bind(this))},setValue:function(e){a.setValue(e)},getValue:function(e){return a.getValue(e)}};return c.initialize.call(h),h}}),define("form/validation",["form/util"],function(e){return function(t){var n,r={initialize:function(){r.bindValidationDomEvents.call(this),e.debug("INIT Validation")},bindValidationDomEvents:function(){!t.options.validationSubmitEvent||t.$el.on("submit",function(){return t.validation.validate()}.bind(this))},setValid:function(e){n=e}},i={validate:function(n){var i=!0;return $.each(t.elements,function(e,t){t.validate(n)||(i=!1)}),r.setValid.call(this,i),e.debug("Validation",i?"success":"error"),i},isValid:function(){return n},updateConstraint:function(e,t,n){var r=$(e);if(!r.data("element"))throw"No validation element";$(e).data("element").updateConstraint(t,n)},deleteConstraint:function(e,t){var n=$(e);if(!n.data("element"))throw"No validation element";n.data("element").deleteConstraint(t)},addConstraint:function(e,n,r){var i=$(e),s;i.data("element")?i.data("element").addConstraint(n,r):(s=t.addField(e),s.addConstraint(n,r),t.elements.push(s))}};return r.initialize.call(i),i}}),define("form/mapper",["form/util"],function(e){return function(t){var n={initialize:function(){e.debug("INIT Mapper")},processData:function(e){var n=$(e),r=n.data("type"),i=n.data("element"),s;return r!=="array"?i.getValue():(s=[],$.each(n.children(),function(e,n){s.push(t.mapper.getData($(n)))}),s)},setArrayData:function(n,r){var i=r.children().first(),s;$.each(e.getFields(r),function(e,n){t.removeField(n)}.bind(this)),r.children().remove(),$.each(n,function(n,o){var u=i.clone(),a=e.getFields(u),f=$.Deferred(),l=a.length;r.append(u),f.then(function(){t.mapper.setData(o,u)}),$.each(a,function(e,n){s=t.addField($(n)),s.initialized.then(function(){l--,l===0&&f.resolve()})}.bind(this))})}},r={setData:function(e,r){r||(r=t.$el),$.each(e,function(e,i){var s='*[data-mapper-property="'+e+'"]',o=r.find(s),u=o.data("element");o.length>0&&($.isArray(i)?n.setArrayData.call(this,i,o):u?u.setValue(i):(u=t.addField(o),u.initialized.then(function(){u.setValue(i)})))}.bind(this))},getData:function(e){e||(e=t.$el);var r={},i,s,o,u="*[data-mapper-property]",a=e.find(u);while(a.length>0)i=$(a.get(0)),s=i.data("mapper-property"),s.match(/.*\..*/)?(o=s.split("."),r[o[0]]={},r[o[0]][o[1]]=n.processData.call(this,i)):r[s]=n.processData.call(this,i),a=a.not(i),a=a.not(i.find(u));return r}};return n.initialize.call(r),r}}),require.config({paths:{form:"js/form","form/mapper":"js/mapper","form/validation":"js/validation","form/element":"js/element","form/util":"js/util","type/default":"js/types/default","type/string":"js/types/string","type/date":"js/types/date","type/decimal":"js/types/decimal","type/email":"js/types/email","type/url":"js/types/url","type/label":"js/types/label","validator/default":"js/validators/default","validator/min":"js/validators/min","validator/max":"js/validators/max","validator/minLength":"js/validators/min-length","validator/maxLength":"js/validators/max-length","validator/required":"js/validators/required","validator/unique":"js/validators/unique"}}),define("form",["form/element","form/validation","form/mapper","form/util"],function(e,t,n,r){return function(i,s){var o={debug:!1,validation:!0,validationTrigger:"focusout",validationAddClassesParent:!0,validationAddClasses:!0,validationSubmitEvent:!0,mapper:!0},u={initialize:function(){this.$el=$(i),this.options=$.extend(o,this.$el.data(),s),r.debugEnabled=this.options.debug,u.initFields.call(this),!this.options.validation||(this.validation=new t(this)),!this.options.mapper||(this.mapper=new n(this)),this.$el.data("form-object",this),r.debug("Form",this),r.debug("Elements",this.elements)},initFields:function(){$.each(r.getFields(this.$el),function(e,t){this.addField.call(this,t)}.bind(this))},bindValidationDomEvents:function(){!this.options.validationSubmitEvent||this.$el.on("submit",function(){return this.validation.validate()}.bind(this))}},a={elements:[],options:{},validation:!1,mapper:!1,addField:function(t){var n=$(t),i=r.parseData(n,"",this.options),s=new e(n,this,i);return this.elements.push(s),r.debug("Element created",i),s},removeField:function(e){var t=$(e),n=t.data("element");this.elements.splice(this.elements.indexOf(n),1)}};return u.initialize.call(a),a}}),define("type/default",[],function(){return function(e,t,n,r,i){var s={initialize:function(){this.$el=e,this.options=$.extend({},t,n),!this.initializeSub||this.initializeSub()}},o={name:r,needsValidation:function(){return!0},updateConstraint:function(e){$.extend(this.options,e)},setValue:function(e){this.$el.val(this.getViewData.call(this,e))},getValue:function(){return this.getModelData.call(this,this.$el.val())},getViewData:function(e){return e},getModelData:function(e){return e}},u=$.extend({},o,i);return s.initialize.call(u),u}}),define("type/string",["type/default"],function(e){return function(t,n){var r={},i={needsValidation:function(){return!1},validate:function(){return!0}};return new e(t,r,n,"string",i)}}),define("type/date",["type/default"],function(e){return function(t,n){var r={format:"d"},i=function(e){return console.log(e,new Date(e)),new Date(e)},s={validate:function(){var e=this.$el.val(),t;return e===""?!0:(t=Globalize.parseDate(e,this.options.format),t!==null)},getViewData:function(e){return Globalize.format(i(e),this.options.format)},getModelData:function(e){if(e!==""){var t=Globalize.parseDate(e,this.options.format);return t.toISOString()}return e}};return new e(t,r,n,"date",s)}}),define("type/decimal",["type/default"],function(e){return function(t,n){var r={regExp:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/},i={initializeSub:function(){},validate:function(){var e=this.$el.val();return e===""?!0:this.options.regExp.test(this.$el.val())}};return new e(t,r,n,"decimal",i)}}),define("type/email",["type/default"],function(e){return function(t,n){var r={regExp:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))){2,6}$/i},i={validate:function(){var e=this.$el.val();return e===""?!0:this.options.regExp.test(this.$el.val())}};return new e(t,r,n,"email",i)}}),define("type/url",["type/default"],function(e){return function(t,n){var r={regExp:/^(https?|s?ftp|git):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},i={validate:function(){var e=this.$el.val();return e===""?!0:(this.options["url-strict"]!=="true"&&(e=(new RegExp("(https?|s?ftp|git)","i")).test(e)?e:"http://"+e),this.options.regExp.test(e))}};return new e(t,r,n,"email",i)}}),define("type/label",["type/default"],function(e){return function(t,n){var r={id:"id",label:"name"},i={setValue:function(e){!e[this.options.label]||this.$el.text(e[this.options.label]),!e[this.options.id]||this.$el.data(this.options.id,e[this.options.id])},getValue:function(){var e={};return e[this.options.id]=this.$el.data(this.options.id),e[this.options.label]=this.$el.text(),e},needsValidation:function(){return!1},validate:function(){return!0}};return new e(t,r,n,"label",i)}}),define("validator/default",[],function(){return function(e,t,n,r,i){return{name:i,initialize:function(){this.$el=e,this.data=$.extend(n,this.$el.data(),r),this.updateData(),!this.initializeSub||this.initializeSub()},updateConstraint:function(e){$.extend(this.data,e),this.updateData()},updateData:function(){$.each(this.data,function(e,t){this.$el.data(e,t)}.bind(this))}}}}),define("validator/min",["validator/default"],function(e){return function(t,n,r){var i={min:0},s=$.extend(new e(t,n,i,r,"min"),{validate:function(){var e=this.$el.val();return Number(e)>=this.data.min}});return s.initialize(),s}}),define("validator/max",["validator/default"],function(e){return function(t,n,r){var i={max:999},s=$.extend(new e(t,n,i,r,"max"),{validate:function(){var e=this.$el.val();return Number(e)<=this.data.max}});return s.initialize(),s}}),define("validator/minLength",["validator/default"],function(e){return function(t,n,r){var i={minLength:0},s=$.extend(new e(t,n,i,r,"min-length"),{validate:function(){var e=this.$el.val();return e.length>=this.data.minLength}});return s.initialize(),s}}),define("validator/maxLength",["validator/default"],function(e){return function(t,n,r){var i={maxLength:999},s=$.extend(new e(t,n,i,r,"max-length"),{validate:function(){var e=this.$el.val();return e.length<=this.data.maxLength}});return s.initialize(),s}}),define("validator/required",["validator/default"],function(e){return function(t,n,r){var i={},s=$.extend(new e(t,n,i,r,"required"),{validate:function(e){if(!!this.data.required){var t=e||this.$el.val(),n;if("object"==typeof t){for(n in t)if(this.validate(t[n]))return!0;return!1}return t.length>0&&""!==t.replace(/^\s+/g,"").replace(/\s+$/g,"")}return!0}});return s.initialize(),s}}),define("validator/unique",["validator/default"],function(e){return function(t,n,r){var i={validationUnique:null},s=$.extend({},new e(t,n,i,r,"unique"),{validate:function(){var e=$(t).val(),r=t.data("validation-unique"),i=0;return $.each(n.elements,function(t,n){var s=n.options.validationUnique,o=n.getValue();return r===s&&e===o&&i++,i<=1}),i<=1}});return s.initialize(),s}}),define("husky-validation",function(){}),function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N;n=function(e){return new n.prototype.init(e)},typeof require!="undefined"&&typeof exports!="undefined"&&typeof module!="undefined"?module.exports=n:e.Globalize=n,n.cultures={},n.prototype={constructor:n,init:function(e){return this.cultures=n.cultures,this.cultureSelector=e,this}},n.prototype.init.prototype=n.prototype,n.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}},n.cultures["default"].calendar=n.cultures["default"].calendars.standard,n.cultures.en=n.cultures["default"],n.cultureSelector="en",r=/^0x[a-f0-9]+$/i,i=/^[+\-]?infinity$/i,s=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,o=/^\s+|\s+$/g,u=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},a=function(e,t){return e.substr(e.length-t.length)===t},f=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,p=arguments.length,d=!1;typeof u=="boolean"&&(d=u,u=arguments[1]||{},a=2),typeof u!="object"&&!c(u)&&(u={});for(;a<p;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;d&&i&&(h(i)||(s=l(i)))?(s?(s=!1,o=r&&l(r)?r:[]):o=r&&h(r)?r:{},u[n]=f(d,o,i)):i!==t&&(u[n]=i)}return u},l=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},c=function(e){return Object.prototype.toString.call(e)==="[object Function]"},h=function(e){return Object.prototype.toString.call(e)==="[object Object]"},p=function(e,t){return e.indexOf(t)===0},d=function(e){return(e+"").replace(o,"")},v=function(e){return isNaN(e)?NaN:Math[e<0?"ceil":"floor"](e)},m=function(e,t,n){var r;for(r=e.length;r<t;r+=1)e=n?"0"+e:e+"0";return e},g=function(e,t){var n=0,r=!1;for(var i=0,s=e.length;i<s;i++){var o=e.charAt(i);switch(o){case"'":r?t.push("'"):n++,r=!1;break;case"\\":r&&t.push("\\"),r=!r;break;default:t.push(o),r=!1}}return n},y=function(e,t){t=t||"F";var n,r=e.patterns,i=t.length;if(i===1){n=r[t];if(!n)throw"Invalid date format string '"+t+"'.";t=n}else i===2&&t.charAt(0)==="%"&&(t=t.charAt(1));return t},b=function(e,t,n){function T(e,t){var n,r=e+"";return t>1&&r.length<t?(n=c[t-2]+r,n.substr(n.length-t,t)):(n=r,n)}function N(){return h||p?h:(h=d.test(t),p=!0,h)}function C(e,t){if(w)return w[t];switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();default:throw"Invalid part value "+t}}var r=n.calendar,i=r.convert,s;if(!t||!t.length||t==="i"){if(n&&n.name.length)if(i)s=b(e,r.patterns.F,n);else{var o=new Date(e.getTime()),u=S(e,r.eras);o.setFullYear(x(e,r,u)),s=o.toLocaleString()}else s=e.toString();return s}var a=r.eras,f=t==="s";t=y(r,t),s=[];var l,c=["0","00","000"],h,p,d=/([^d]|^)(d|dd)([^d]|$)/g,v=0,m=E(),w;!f&&i&&(w=i.fromGregorian(e));for(;;){var k=m.lastIndex,L=m.exec(t),A=t.slice(k,L?L.index:t.length);v+=g(A,s);if(!L)break;if(v%2){s.push(L[0]);continue}var O=L[0],M=O.length;switch(O){case"ddd":case"dddd":var _=M===3?r.days.namesAbbr:r.days.names;s.push(_[e.getDay()]);break;case"d":case"dd":h=!0,s.push(T(C(e,2),M));break;case"MMM":case"MMMM":var D=C(e,1);s.push(r.monthsGenitive&&N()?r.monthsGenitive[M===3?"namesAbbr":"names"][D]:r.months[M===3?"namesAbbr":"names"][D]);break;case"M":case"MM":s.push(T(C(e,1)+1,M));break;case"y":case"yy":case"yyyy":D=w?w[0]:x(e,r,S(e,a),f),M<4&&(D%=100),s.push(T(D,M));break;case"h":case"hh":l=e.getHours()%12,l===0&&(l=12),s.push(T(l,M));break;case"H":case"HH":s.push(T(e.getHours(),M));break;case"m":case"mm":s.push(T(e.getMinutes(),M));break;case"s":case"ss":s.push(T(e.getSeconds(),M));break;case"t":case"tt":D=e.getHours()<12?r.AM?r.AM[0]:" ":r.PM?r.PM[0]:" ",s.push(M===1?D.charAt(0):D);break;case"f":case"ff":case"fff":s.push(T(e.getMilliseconds(),3).substr(0,M));break;case"z":case"zz":l=e.getTimezoneOffset()/60,s.push((l<=0?"+":"-")+T(Math.floor(Math.abs(l)),M));break;case"zzz":l=e.getTimezoneOffset()/60,s.push((l<=0?"+":"-")+T(Math.floor(Math.abs(l)),2)+":"+T(Math.abs(e.getTimezoneOffset()%60),2));break;case"g":case"gg":r.eras&&s.push(r.eras[S(e,a)].name);break;case"/":s.push(r["/"]);break;default:throw"Invalid date format pattern '"+O+"'."}}return s.join("")},function(){var e;e=function(e,t,n){var r=n.groupSizes,i=r[0],s=1,o=Math.pow(10,t),u=Math.round(e*o)/o;isFinite(u)||(u=e),e=u;var a=e+"",f="",l=a.split(/e/i),c=l.length>1?parseInt(l[1],10):0;a=l[0],l=a.split("."),a=l[0],f=l.length>1?l[1]:"";var h;c>0?(f=m(f,c,!1),a+=f.slice(0,c),f=f.substr(c)):c<0&&(c=-c,a=m(a,c+1,!0),f=a.slice(-c,a.length)+f,a=a.slice(0,-c)),t>0?f=n["."]+(f.length>t?f.slice(0,t):m(f,t)):f="";var p=a.length-1,d=n[","],v="";while(p>=0){if(i===0||i>p)return a.slice(0,p+1)+(v.length?d+v+f:f);v=a.slice(p-i+1,p+1)+(v.length?d+v:""),p-=i,s<r.length&&(i=r[s],s++)}return a.slice(0,p+1)+d+v+f},w=function(t,n,r){if(!isFinite(t))return t===Infinity?r.numberFormat.positiveInfinity:t===-Infinity?r.numberFormat.negativeInfinity:r.numberFormat.NaN;if(!n||n==="i")return r.name.length?t.toLocaleString():t.toString();n=n||"D";var i=r.numberFormat,s=Math.abs(t),o=-1,u;n.length>1&&(o=parseInt(n.slice(1),10));var a=n.charAt(0).toUpperCase(),f;switch(a){case"D":u="n",s=v(s),o!==-1&&(s=m(""+s,o,!0)),t<0&&(s="-"+s);break;case"N":f=i;case"C":f=f||i.currency;case"P":f=f||i.percent,u=t<0?f.pattern[0]:f.pattern[1]||"n",o===-1&&(o=f.decimals),s=e(s*(a==="P"?100:1),o,f);break;default:throw"Bad number format specifier: "+a}var l=/n|\$|-|%/g,c="";for(;;){var h=l.lastIndex,p=l.exec(u);c+=u.slice(h,p?p.index:u.length);if(!p)break;switch(p[0]){case"n":c+=s;break;case"$":c+=i.currency.symbol;break;case"-":/[1-9]/.test(s)&&(c+=i["-"]);break;case"%":c+=i.percent.symbol}}return c}}(),E=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},S=function(e,t){if(!t)return 0;var n,r=e.getTime();for(var i=0,s=t.length;i<s;i++){n=t[i].start;if(n===null||r>=n)return i}return 0},x=function(e,t,n,r){var i=e.getFullYear();return!r&&t.eras&&(i-=t.eras[n].offset),i},function(){var e,t,n,r,i,s,o;e=function(e,t){if(t<100){var n=new Date,r=S(n),i=x(n,e,r),s=e.twoDigitYearMax;s=typeof s=="string"?(new Date).getFullYear()%100+parseInt(s,10):s,t+=i-i%100,t>s&&(t-=100)}return t},t=function(e,t,n){var r,i=e.days,a=e._upperDays;return a||(e._upperDays=a=[o(i.names),o(i.namesAbbr),o(i.namesShort)]),t=s(t),n?(r=u(a[1],t),r===-1&&(r=u(a[2],t))):r=u(a[0],t),r},n=function(e,t,n){var r=e.months,i=e.monthsGenitive||e.months,a=e._upperMonths,f=e._upperMonthsGen;a||(e._upperMonths=a=[o(r.names),o(r.namesAbbr)],e._upperMonthsGen=f=[o(i.names),o(i.namesAbbr)]),t=s(t);var l=u(n?a[1]:a[0],t);return l<0&&(l=u(n?f[1]:f[0],t)),l},r=function(e,t){var n=e._parseRegExp;if(!n)e._parseRegExp=n={};else{var r=n[t];if(r)return r}var i=y(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),s=["^"],o=[],u=0,a=0,f=E(),l;while((l=f.exec(i))!==null){var c=i.slice(u,l.index);u=f.lastIndex,a+=g(c,s);if(a%2){s.push(l[0]);continue}var h=l[0],p=h.length,d;switch(h){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":d="(\\D+)";break;case"tt":case"t":d="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":d="(\\d{"+p+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":d="(\\d\\d?)";break;case"zzz":d="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":d="([+-]?\\d\\d?)";break;case"/":d="(\\/)";break;default:throw"Invalid date format pattern '"+h+"'."}d&&s.push(d),o.push(l[0])}g(i.slice(u),s),s.push("$");var v=s.join("").replace(/\s+/g,"\\s+"),m={regExp:v,groups:o};return n[t]=m},i=function(e,t,n){return e<t||e>n},s=function(e){return e.split(" ").join(" ").toUpperCase()},o=function(e){var t=[];for(var n=0,r=e.length;n<r;n++)t[n]=s(e[n]);return t},T=function(s,o,u){s=d(s);var a=u.calendar,f=r(a,o),l=(new RegExp(f.regExp)).exec(s);if(l===null)return null;var c=f.groups,h=null,v=null,m=null,g=null,y=null,b=0,w,E=0,S=0,x=0,T=null,N=!1;for(var C=0,k=c.length;C<k;C++){var L=l[C+1];if(L){var A=c[C],O=A.length,M=parseInt(L,10);switch(A){case"dd":case"d":g=M;if(i(g,1,31))return null;break;case"MMM":case"MMMM":m=n(a,L,O===3);if(i(m,0,11))return null;break;case"M":case"MM":m=M-1;if(i(m,0,11))return null;break;case"y":case"yy":case"yyyy":v=O<4?e(a,M):M;if(i(v,0,9999))return null;break;case"h":case"hh":b=M,b===12&&(b=0);if(i(b,0,11))return null;break;case"H":case"HH":b=M;if(i(b,0,23))return null;break;case"m":case"mm":E=M;if(i(E,0,59))return null;break;case"s":case"ss":S=M;if(i(S,0,59))return null;break;case"tt":case"t":N=a.PM&&(L===a.PM[0]||L===a.PM[1]||L===a.PM[2]);if(!N&&(!a.AM||L!==a.AM[0]&&L!==a.AM[1]&&L!==a.AM[2]))return null;break;case"f":case"ff":case"fff":x=M*Math.pow(10,3-O);if(i(x,0,999))return null;break;case"ddd":case"dddd":y=t(a,L,O===3);if(i(y,0,6))return null;break;case"zzz":var _=L.split(/:/);if(_.length!==2)return null;w=parseInt(_[0],10);if(i(w,-12,13))return null;var D=parseInt(_[1],10);if(i(D,0,59))return null;T=w*60+(p(L,"-")?-D:D);break;case"z":case"zz":w=M;if(i(w,-12,13))return null;T=w*60;break;case"g":case"gg":var P=L;if(!P||!a.eras)return null;P=d(P.toLowerCase());for(var H=0,B=a.eras.length;H<B;H++)if(P===a.eras[H].name.toLowerCase()){h=H;break}if(h===null)return null}}}var j=new Date,F,I=a.convert;F=I?I.fromGregorian(j)[0]:j.getFullYear(),v===null?v=F:a.eras&&(v+=a.eras[h||0].offset),m===null&&(m=0),g===null&&(g=1);if(I){j=I.toGregorian(v,m,g);if(j===null)return null}else{j.setFullYear(v,m,g);if(j.getDate()!==g)return null;if(y!==null&&j.getDay()!==y)return null}N&&b<12&&(b+=12),j.setHours(b,E,S,x);if(T!==null){var q=j.getMinutes()-(T+j.getTimezoneOffset());j.setHours(j.getHours()+parseInt(q/60,10),q%60)}return j}}(),N=function(e,t,n){var r=t["-"],i=t["+"],s;switch(n){case"n -":r=" "+r,i=" "+i;case"n-":a(e,r)?s=["-",e.substr(0,e.length-r.length)]:a(e,i)&&(s=["+",e.substr(0,e.length-i.length)]);break;case"- n":r+=" ",i+=" ";case"-n":p(e,r)?s=["-",e.substr(r.length)]:p(e,i)&&(s=["+",e.substr(i.length)]);break;case"(n)":p(e,"(")&&a(e,")")&&(s=["-",e.substr(1,e.length-2)])}return s||["",e]},n.prototype.findClosestCulture=function(e){return n.findClosestCulture.call(this,e)},n.prototype.format=function(e,t,r){return n.format.call(this,e,t,r)},n.prototype.localize=function(e,t){return n.localize.call(this,e,t)},n.prototype.parseInt=function(e,t,r){return n.parseInt.call(this,e,t,r)},n.prototype.parseFloat=function(e,t,r){return n.parseFloat.call(this,e,t,r)},n.prototype.culture=function(e){return n.culture.call(this,e)},n.addCultureInfo=function(e,t,n){var r={},i=!1;typeof e!="string"?(n=e,e=this.culture().name,r=this.cultures[e]):typeof t!="string"?(n=t,i=this.cultures[e]==null,r=this.cultures[e]||this.cultures["default"]):(i=!0,r=this.cultures[t]),this.cultures[e]=f(!0,{},r,n),i&&(this.cultures[e].calendar=this.cultures[e].calendars.standard)},n.findClosestCulture=function(e){var t;if(!e)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];typeof e=="string"&&(e=e.split(","));if(l(e)){var n,r=this.cultures,i=e,s,o=i.length,u=[];for(s=0;s<o;s++){e=d(i[s]);var a,f=e.split(";");n=d(f[0]),f.length===1?a=1:(e=d(f[1]),e.indexOf("q=")===0?(e=e.substr(2),a=parseFloat(e),a=isNaN(a)?0:a):a=1),u.push({lang:n,pri:a})}u.sort(function(e,t){return e.pri<t.pri?1:e.pri>t.pri?-1:0});for(s=0;s<o;s++){n=u[s].lang,t=r[n];if(t)return t}for(s=0;s<o;s++){n=u[s].lang;do{var c=n.lastIndexOf("-");if(c===-1)break;n=n.substr(0,c),t=r[n];if(t)return t}while(1)}for(s=0;s<o;s++){n=u[s].lang;for(var h in r){var p=r[h];if(p.language==n)return p}}}else if(typeof e=="object")return e;return t||null},n.format=function(e,t,n){var r=this.findClosestCulture(n);return e instanceof Date?e=b(e,t,r):typeof e=="number"&&(e=w(e,t,r)),e},n.localize=function(e,t){return this.findClosestCulture(t).messages[e]||this.cultures["default"].messages[e]},n.parseDate=function(e,t,n){n=this.findClosestCulture(n);var r,i,s;if(t){typeof t=="string"&&(t=[t]);if(t.length)for(var o=0,u=t.length;o<u;o++){var a=t[o];if(a){r=T(e,a,n);if(r)break}}}else{s=n.calendar.patterns;for(i in s){r=T(e,s[i],n);if(r)break}}return r||null},n.parseInt=function(e,t,r){return v(n.parseFloat(e,t,r))},n.parseFloat=function(e,t,n){typeof t!="number"&&(n=t,t=10);var o=this.findClosestCulture(n),u=NaN,a=o.numberFormat;e.indexOf(o.numberFormat.currency.symbol)>-1&&(e=e.replace(o.numberFormat.currency.symbol,""),e=e.replace(o.numberFormat.currency["."],o.numberFormat["."])),e.indexOf(o.numberFormat.percent.symbol)>-1&&(e=e.replace(o.numberFormat.percent.symbol,"")),e=e.replace(/ /g,"");if(i.test(e))u=parseFloat(e);else if(!t&&r.test(e))u=parseInt(e,16);else{var f=N(e,a,a.pattern[0]),l=f[0],c=f[1];l===""&&a.pattern[0]!=="(n)"&&(f=N(e,a,"(n)"),l=f[0],c=f[1]),l===""&&a.pattern[0]!=="-n"&&(f=N(e,a,"-n"),l=f[0],c=f[1]),l=l||"+";var h,p,d=c.indexOf("e");d<0&&(d=c.indexOf("E")),d<0?(p=c,h=null):(p=c.substr(0,d),h=c.substr(d+1));var v,m,g=a["."],y=p.indexOf(g);y<0?(v=p,m=null):(v=p.substr(0,y),m=p.substr(y+g.length));var b=a[","];v=v.split(b).join("");var w=b.replace(/\u00A0/g," ");b!==w&&(v=v.split(w).join(""));var E=l+v;m!==null&&(E+="."+m);if(h!==null){var S=N(h,a,"-n");E+="e"+(S[0]||"+")+S[1]}s.test(E)&&(u=parseFloat(E))}return u},n.culture=function(e){return typeof e!="undefined"&&(this.cultureSelector=e),this.findClosestCulture(e)||this.cultures["default"]}}(this),define("globalize_lib",function(){}),define("__component__$navigation@husky",["jquery"],function(e){var t;return{view:!0,initialize:function(){t=this.sandbox,t.logger.log("initialize",this),t.logger.log(arguments),this.$navigation=e("<div/>",{"class":"navigation"}),this.currentColumnIdx=0,this.data=null,this.columnHeader=null,this.columnItems=null,!this.options.url||this.load({url:this.options.url,success:function(){this.prepareNavigation(),this.render()}.bind(this)})},load:function(e){t.logger.log("load",e),t.util.ajax({url:e.url,success:function(n){t.logger.log("load",e),this.data=n,this.columnHeader=this.data.header||null,this.columnItems=this.data.sub.items||null,this.setConfigs(n),typeof e.success=="function"&&e.success(this.data)}.bind(this)})},setConfigs:function(e){this.configs={displayOption:e.displayOption||null}},prepareNavigation:function(){return this.$navigationColumns=e("<ul/>",{"class":"navigation-columns"}),this.$navigationColumns.append(this.prepareNavigationColumn()),this.$navigation.append(this.$navigationColumns),this},setNavigationSize:function(){var t=e(window),n=e(".navigation-sub-columns-container"),r=e(".navigation-sub-columns"),i=100;setTimeout(function(){r.css({width:"auto"}),n.removeClass("scrolling"),t.width()<this.$navigation.width()+i?(r.css({width:t.width()-i-(this.$navigation.width()-r.width()),height:this.$navigation.height()}),n.addClass("scrolling")):r.css({height:this.$navigation.height()+5})}.bind(this),250)},prepareNavigationColumn:function(){var t,n;return n=[" "],this.$navigationColumns.removeClass("show-content"),this.configs.displayOption==="content"?(n.push("content-column"),this.$navigationColumns.addClass("show-content")):this.currentColumnIdx===1&&n.push("second-column"),t=e("<li/>",{id:"column-"+this.currentColumnIdx,"data-column-id":this.currentColumnIdx,"class":"navigation-column"+(n.length>1?n.join(" "):"")}),!this.columnHeader||t.append(this.prepareColumnHeader()),t.append(this.prepareColumnItems()),t},prepareNavigationSubColumn:function(){return this.$navigationSubColumns=e("<ul/>",{"class":"navigation-sub-columns"}),this.$navigationSubColumns},prepareColumnHeader:function(){var t;return t=e("<div/>",{"class":"navigation-column-header"}),t.html(this.template.columnHeader({title:this.columnHeader.title,logo:this.columnHeader.logo})),t},prepareColumnItems:function(){var t,n,r,i,s,o,u,a,f,l;return n=[],t=e("<ul/>",{"class":"navigation-items"}),!this.columnItems||(!this.itemsCollection||delete this.itemsCollection,this.itemsCollection=new this.collections.items,this.columnItems.forEach(function(e){f=this.models.item(e),this.itemsCollection.add(f),i=[],!!f.get("class")&&i.push(f.get("class")),i.push("navigation-column-item"),r=' class="'+i.join(" ")+'"',o=f.get("hasSub")?' data-has-sub="true"':"",a='title="'+f.get("title")+'"',u=f.get("icon")?'<span class="icon-'+f.get("icon")+'"></span>':"",l='id="'+f.get("id")+'"',n.push("<li ",l,a,r,s,o,">",u,f.get("title"),"</li>")}.bind(this)),t.append(n.join(""))),t},addColumn:function(){var n,r=e(".navigation-sub-columns-container");this.currentColumnIdx++,this.currentColumnIdx===2&&!r.size()&&(n=e("<li/>",{"class":"navigation-sub-columns-container"}),n.append(this.prepareNavigationSubColumn()),this.$navigationColumns.append(n)),r.size()?(this.$navigationSubColumns.append(this.prepareNavigationColumn()),this.scrollToLastSubColumn()):this.$navigationColumns.append(this.prepareNavigationColumn()),this.setNavigationSize(),t.emit("navigation.size.changed",this.getNavigationData())},collapseFirstColumn:function(){t.logger.log("collapseFirstColumn");var n;n=e("#column-0"),n.addClass("collapsed")},showNavigationColumns:function(t){var n,r,i;i=e(t.target),n=e("#column-0"),r=e("#column-1"),this.$navigationColumns.removeClass("show-content"),this.showContent=!1,!i.hasClass("navigation-column-item")&&!i.is("span")?(n.removeClass("hide"),r.removeClass("collapsed"),this.hideColumn()):(n.removeClass("hide"),r.removeClass("collapsed")),this.setNavigationSize()},selectionLocked:!0,showContent:!1,selectItem:function(n){t.logger.log("selectItem");var r,i,s,o;this.showContent=!1,r=e(n.currentTarget),i=r.parent().parent(),s=r.attr("id"),o=this.itemsCollection.get(s),this.currentColumnIdx=i.data("column-id"),this.currentColumnIdx=i.data("column-id"),!!o&&this.selectionLocked&&(i.find(".selected").removeClass("selected"),r.addClass("selected"),t.emit("navigation.item.selected",{item:o,data:this.getNavigationData()}),o.get("hasSub")?o.get("sub")?(this.setConfigs({}),this.columnHeader=o.get("header")||null,this.columnItems=o.get("sub").items,this.updateColumns(),this.addColumn(),this.currentColumnIdx>1&&this.collapseFirstColumn(),t.emit("navigation.item.sub.show",{item:o,data:this.getNavigationData()})):(this.selectionLocked=!1,this.addLoader(r),this.updateColumns(),this.load({url:o.get("action"),success:function(){this.selectionLocked=!0,this.addColumn(),this.hideLoader(r),this.currentColumnIdx>1&&this.collapseFirstColumn(),t.emit("navigation.item.sub.loaded",{item:o,data:this.getNavigationData()})}.bind(this)})):o.get("type")==="content"&&(this.showContent=!0,this.updateColumns(),i.data("columnId")!==0?this.collapseFirstColumn():e("#column-0").removeClass("hide").removeClass("collapsed").parent().removeClass("show-content"),t.emit("navigation.item.content.show",{item:o,data:this.getNavigationData()})))},updateColumns:function(){e(".navigation-columns > li:gt("+this.currentColumnIdx+")").remove(),e(".navigation-column:gt("+this.currentColumnIdx+")").remove()},getNavigationWidth:function(){var t=e(".navigation-column"),n=0,r=null;return e.each(t,function(t,i){r=e(i),this.$navigationColumns.hasClass("show-content")?n=200:r.hasClass("collapsed")?n+=50:n+=250}.bind(this)),n},getNavigationData:function(){return{navWidth:this.getNavigationWidth()}},showFirstNavigationColumn:function(n){t.logger.log("showFirstNavigationColumn");var r=e(n.target);e("#column-0").removeClass("hide").removeClass("collapsed"),!r.hasClass("navigation-column-item")&&!r.is("span")&&(this.currentColumnIdx=1,this.updateColumns(),e("#column-1").find(".selected").removeClass("selected"))},showColumn:function(n){t.logger.log("showColumn");var r,i=e("#column-0"),s=e("#column-1"),o=i.length,u=s.length;n=n||{};if(!n.data)t.logger.error("showColumn","No data was defined!");else{this.columnHeader=n.data.header||null,this.columnItems=n.data.sub.items||null,this.setConfigs(n.data);if(o!==1||u!==0)e("#column-0").addClass("hide"),e("#column-1").addClass("collapsed");this.showContent=!0,this.addColumn(),this.addedColumn=this.currentColumnIdx,r=e("#column-"+this.addedColumn),r.find("ul.navigation-items li:first").addClass("selected"),t.emit("navigation.column.content.show",{data:this.getNavigationData()})}},hideColumn:function(){var t;t=e("#column-"+this.addedColumn),!t.size()||(t.remove(),e("#column-0").removeClass("hide"),e("#column-1").removeClass("collapsed")),this.addedColumn=null},scrollLocked:!0,scrollSubColumns:function(e){var t=e.originalEvent.detail<0||e.originalEvent.wheelDelta>0?1:-1,n=25,r=0;e.preventDefault(),this.scrollLocked&&(this.scrollLocked=!1,setTimeout(function(){this.scrollLocked=!0,t<0?(r=this.$navigationSubColumns.scrollLeft()+n,this.$navigationSubColumns.scrollLeft(r)):(r=this.$navigationSubColumns.scrollLeft()-n,this.$navigationSubColumns.scrollLeft(r))}.bind(this),25))},scrollToLastSubColumn:function(){this.$navigationSubColumns.delay(250).animate({scrollLeft:1e3},500)},bindEvents:function(){t.on("navigation.item.column.show",this.showColumn.bind(this))},bindDOMEvents:function(){t.logger.log("bindDOMEvents"),this.$el.off(),e(window).on("resize load",this.setNavigationSize.bind(this)),this.$el.on("click",".navigation-column-item",this.selectItem.bind(this)),this.$el.on("click",".navigation-column:eq(1)",this.showNavigationColumns.bind(this)),this.$el.on("click",".navigation-column:eq(0).collapsed",this.showFirstNavigationColumn.bind(this)),this.$el.on("mousewheel DOMMouseScroll",".navigation-sub-columns-container",this.scrollSubColumns.bind(this))},render:function(){this.$el.html(this.$navigation),this.bindEvents(),this.bindDOMEvents()},addLoader:function(e){e.addClass("is-loading")},hideLoader:function(e){e.removeClass("is-loading")},collections:{items:function(){return e.extend({},t.data.Collection)}},models:{item:function(n){var r={title:"",hasSub:!1};return e.extend({},t.data.Model,r,n)}},template:{columnHeader:function(e){var t=null;return e=e||{},e.title=e.title||"",e.logo=e.logo||"",!e.logo||(t='<span class="navigation-column-logo"><img alt="'+e.title+'" src="'+e.logo+'"/></span>'),[t,'<h2 class="navigation-column-title">',e.title,"</h2>"].join("")},search:function(e){return e=e||{},e.action=e.action||"",e.icon=e.icon||"",['<input type="text" class="search" autofill="false" data-action="',e.action,'" placeholder="Search ..."/>'].join("")}}}}),define("__component__$header@husky",[],function(){var e,t,n={save:{template:function(){return['<div class="grid-row">','   <div class="grid-col-6 left">','       <div id="save-button" data-aura-component="button@husky" data-aura-instance-name="save" data-aura-button-type="icon" data-aura-button-state="disable" data-aura-background="black" data-aura-icon-type="circle-ok" data-aura-text="Saved"/>',"   </div>","</div>"].join("")},reset:function(){},states:{standard:function(){e.emit("husky.button.save.set-content","Saved","circle-ok"),e.emit("husky.button.save.state","disable")},dirty:function(){e.emit("husky.button.save.set-content","Save","caution"),e.emit("husky.button.save.state","standard")},disable:function(){e.emit("husky.button.save.state","disable")},"loading-save-button":function(){e.emit("husky.button.save.state","loading")},hide:function(){e.emit("husky.button.save.state","hide")}}},saveDelete:{template:function(){return['<div class="grid-row">','   <div class="grid-col-6 left">','       <div id="save-button" data-aura-component="button@husky" data-aura-instance-name="save" data-aura-button-type="icon" data-aura-button-state="disable" data-aura-background="black" data-aura-icon-type="circle-ok" data-aura-text="Saved"/>',"   </div>",'   <div class="grid-col-6 right">','       <div id="delete-button" class="pull-right" data-aura-component="button@husky" data-aura-instance-name="delete" data-aura-button-type="icon" data-aura-background="black" data-aura-icon-type="circle-remove" data-aura-text="Delete"/>',"   </div>","</div>"].join("")},reset:function(){},states:{standard:function(){e.emit("husky.button.save.set-content","Saved","circle-ok"),e.emit("husky.button.save.state","disable"),e.emit("husky.button.delete.state","standard")},dirty:function(){e.emit("husky.button.save.set-content","Save","caution"),e.emit("husky.button.save.state","standard"),e.emit("husky.button.delete.state","standard")},disable:function(){e.emit("husky.button.save.state","disable"),e.emit("husky.button.delete.state","disable")},"loading-save-button":function(){e.emit("husky.button.save.state","loading"),e.emit("husky.button.delete.state","disable")},"loading-delete-button":function(){e.emit("husky.button.save.state","disable"),e.emit("husky.button.delete.state","loading")},hide:function(){e.emit("husky.button.save.state","hide"),e.emit("husky.button.delete.state","hide")}}},add:{template:function(){return['<div class="grid-row">','   <div class="grid-col-6 left">','       <div id="add-button" data-aura-component="button@husky" data-aura-instance-name="add" data-aura-button-type="icon" data-aura-background="black" data-aura-icon-type="add" data-aura-text="Add"/>',"   </div>","</div>"].join("")},reset:function(){},states:{standard:function(){e.emit("husky.button.add.state","standard")},disable:function(){e.emit("husky.button.add.state","disable")},"loading-add-button":function(){e.emit("husky.button.add.state","loading")}}},reset:{template:function(){return[]},reset:function(){},states:{}}},r={marginMid:45,marginRight:20,buttonType:null};return{initialize:function(){e=this.sandbox,this.sandbox.logger.log("initialize",this),this.sandbox.logger.log(arguments),this.options=this.sandbox.util.extend({},r,this.options),this.$header=this.sandbox.dom.$("<div/>",{"class":"header header-fixed-top"}),this.$left=this.sandbox.dom.$("<div/>",{"class":"header-left"}),this.$right=this.sandbox.dom.$("<div/>",{"class":"header-right"}),this.$mid=this.sandbox.dom.$("<div/>",{id:"header-mid","class":"header-mid grid"}),this.render()},render:function(){this.$el.append(this.$header),this.$header.append(this.$left),this.$header.append(this.$mid),this.$header.append(this.$right),this.bindDomEvents(),this.bindCustomEvents(),!this.options.buttonType||this.changeButtonType(this.options.buttonType)},bindDomEvents:function(){},bindCustomEvents:function(){this.sandbox.on("navigation.item.content.show",function(e){this.moveButtons(e.data.navWidth)}.bind(this)),this.sandbox.on("navigation.size.changed",function(e){this.moveButtons(e.navWidth)}.bind(this)),this.sandbox.on("husky.header.move-buttons",this.moveButtons.bind(this)),this.sandbox.on("husky.header.button-type",this.changeButtonType.bind(this)),this.sandbox.on("husky.header.button-state",this.changeState.bind(this))},moveButtons:function(e){var t=parseInt(this.sandbox.dom.css(this.$header,"padding-left"),10),n=e+this.options.marginMid-t,r=parseInt(this.sandbox.dom.css(this.$mid,"width"),10);this.$mid.css("margin-left",n),this.$right.css("margin-left",r+n+this.options.marginRight)},changeButtonType:function(e){if(typeof e=="string"){if(!n[e])throw"Not implemented";t=n[e]}else{if(!e.template||!e.reset||!e.states)throw"Not implemented";t=e}this.$mid.html(t.template.call(this)),this.sandbox.start("#header-mid")},changeState:function(e){if(!t||!t.states[e])throw"Not implemented";t.reset.call(this),t.states[e].call(this)}}}),define("__component__$button@husky",[],function(){var e,t={icon:{init:function(){this.sandbox.dom.addClass(this.$el,"pointer icon-btn"),this.$el.html(e.template(this.options.iconType,this.options.text)),e.bindDomEvents.call(this)},bindDomEvents:function(){this.$el.on("click",this.clickEvent.bind(this))},unBindDomEvents:function(){this.$el.off("click")},template:function(e,t){return'<div class="loading-content"><span class="icon-'+e+' pull-left block"></span><span class="m-left-5 bold pull-left m-top-2 block">'+t+"</span></div>"},reset:function(){this.sandbox.dom.removeClass(this.$el,"loading-black"),this.sandbox.dom.removeClass(this.$el,"loading"),this.sandbox.dom.removeClass(this.$el,"disable")},states:{standard:function(){this.sandbox.dom.show(this.$el),e.reset.call(this),e.bindDomEvents.call(this),this.sandbox.dom.addClass(this.$el,"pointer")},disable:function(){this.sandbox.dom.show(this.$el),this.sandbox.dom.addClass(this.$el,"disable"),this.sandbox.dom.removeClass(this.$el,"pointer"),e.unBindDomEvents.call(this)},loading:function(){this.sandbox.dom.show(this.$el),this.options.background?this.sandbox.dom.addClass(this.$el,"loading-"+this.options.background):this.sandbox.dom.addClass(this.$el,"loading"),this.sandbox.dom.removeClass(this.$el,"pointer"),e.unBindDomEvents.call(this)},hide:function(){this.sandbox.dom.hide(this.$el)}}}},n={buttonType:"icon",buttonState:null,instanceName:"undefined",text:"undefined",iconType:"caution",background:null};return{getEvent:function(e){return"husky.button."+this.options.instanceName+"."+e},initialize:function(){this.sandbox.logger.log("initialize",this),this.sandbox.logger.log(arguments),this.options=this.sandbox.util.extend({},n,this.options),this.render(),this.bindCustomEvents()},render:function(){if(typeof this.options.buttonType=="string"){if(!t[this.options.buttonType])throw"not implemented";e=t[this.options.buttonType]}else{if(!this.options.buttonType.init||!this.options.buttonType.render||!this.options.buttonType.states)throw"not implemented";e=this.options.buttonType}e.init.call(this),!this.options.buttonState||this.changeState(this.options.buttonState)},clickEvent:function(){this.sandbox.emit(this.getEvent("click"))},bindCustomEvents:function(){this.sandbox.on(this.getEvent("state"),this.changeState.bind(this)),this.sandbox.on(this.getEvent("set-content"),this.setContent.bind(this))},changeState:function(t){if(!e||!e.states[t])throw"not implemented";e.reset.call(this),e.states[t].call(this)},setContent:function(t,n){this.options.text=t,this.options.iconType=n,e.init.call(this)}}}),define("__component__$datagrid@husky",[],function(){var e={autoRemoveHandling:!0,className:"datagridcontainer",elementType:"table",data:null,defaultMeasureUnit:"px",excludeFields:["id"],pagination:!1,paginationOptions:{pageSize:10,showPages:5},removeRow:!0,selectItem:{type:null,width:"50px"},tableHead:[],url:null};return{view:!0,initialize:function(){this.sandbox.logger.log("initialized datagrid"),this.options=this.sandbox.util.extend(!0,{},e,this.options),this.name=this.options.name,this.data=null,this.configs={},this.allItemIds=[],this.selectedItemIds=[],this.$originalElement=this.sandbox.dom.$(this.options.el),this.$element=this.sandbox.dom.$('<div class="husky-datagrid"/>'),this.$originalElement.append(this.$element),this.options.pagination=this.options.pagination!==undefined?!!this.options.pagination:!!this.options.url,this.getData()},getData:function(){this.options.url?(this.sandbox.logger.log("load data from url"),this.load({url:this.options.url})):!this.options.data.items||(this.sandbox.logger.log("load data from array"),this.data=this.options.data,this.setConfigs(),this.prepare().appendPagination().render()),this.sandbox.logger.log("data in datagrid",this.data)},load:function(e){this.sandbox.logger.log("loading data"),this.sandbox.util.ajax({url:this.getUrl(e),data:e.data,success:function(t){this.sandbox.logger.log("load",e),this.data=t,this.setConfigs(),this.prepare().appendPagination().render(),typeof e.success=="function"&&e.success(t)}.bind(this)})},getUrl:function(e){var t="?",n;return e.url.indexOf("?")!==-1&&(t="&"),n=e.url+t+"pageSize="+this.options.paginationOptions.pageSize,e.page>1&&(n+="&page="+e.page),n},setConfigs:function(){this.configs={},this.configs.total=this.data.total,this.configs.pageSize=this.data.pageSize,this.configs.page=this.data.page},prepare:function(){return this.$element.empty(),this.options.elementType!=="list"&&this.$element.append(this.prepareTable()),this},prepareTable:function(){var e,t,n,r;e=this.sandbox.dom.$("<table/>");if(!!this.data.head||!!this.options.tableHead)t=this.sandbox.dom.$("<thead/>"),t.append(this.prepareTableHead()),e.append(t);return!this.data.items||(n=this.sandbox.dom.$("<tbody/>"),n.append(this.prepareTableRows()),e.append(n)),r=[],r.push(!this.options.className||this.options.className==="table"?"table":"table "+this.options.className),r.push(this.options.selectItem&&this.options.selectItem.type==="checkbox"?"is-selectable":""),e.addClass(r.join(" ")),e},prepareTableHead:function(){var e,t,n,r,i,s,o;return e=[],r=this.options.tableHead||this.data.head,!this.options.selectItem||(o=[],this.options.selectItem.width&&(o=this.getNumberAndUnit(this.options.selectItem.width,this.options.defaultMeasureUnit)),i=[],i.push("width =",o[0],o[1]),e.push('<th class="select-all" ',i.join("")," >"),this.options.selectItem.type==="checkbox"&&e.push(this.templates.checkbox({id:"select-all"})),e.push("</th>")),r.forEach(function(r){t=r.class?' class="'+r.class+'"':"",n="",!r.width||(s=this.getNumberAndUnit(r.width,this.options.defaultMeasureUnit),n=' width="'+s[0]+s[1]+'"'),e.push("<th"+t+n+">"+r.content+"</th>")}.bind(this)),"<tr>"+e.join("")+"</tr>"},getNumberAndUnit:function(e,t){e=String(e);var n=e.match(/(\d+)\s*(.*)/);return!!t&&!n[2]&&(n[2]=t),[n[1],n[2]]},prepareTableRows:function(){var e;return e=[],this.allItemIds=[],this.data.items.forEach(function(t){e.push(this.prepareTableRow(t))}.bind(this)),e.join("")},prepareTableRow:function(e){if(!this.options.template||!this.options.template.row){var t,n,r,i,s,o,u,a;!this.options.className||this.options.className===""?o="":o="-"+this.options.className,i=[],t="",!!e.id&&this.allItemIds.push(parseInt(e.id,10)),!this.options.selectItem.type||this.options.selectItem.type!=="checkbox"?!!this.options.selectItem.type&&this.options.selectItem.type==="radio"&&i.push("<td>",this.templates.radio({name:"husky-radio"+o}),"</td>"):i.push("<td>",this.templates.checkbox(),"</td>");for(u in e)e.hasOwnProperty(u)&&(a=e[u],this.options.excludeFields.indexOf(u)<0?(s=[],n=a.thumb?'<img alt="'+(a.alt||"")+'" src="'+a.thumb+'"/>':a,!!a.class&&s.push(a.class),!!a.thumb&&s.push("thumb"),r=s.length?'class="'+s.join(" ")+'"':"",i.push("<td "+r+" >"+n+"</td>")):t+=" data-"+u+'="'+a+'"');return!this.options.removeRow||i.push('<td class="remove-row">',this.templates.removeRow(),"</td>"),"<tr"+t+">"+i.join("")+"</tr>"}return this.sandbox.template.parse(this.options.template.row,e)},resetItemSelection:function(){this.allItemIds=[],this.selectedItemIds=[]},selectItem:function(e){var t,n,r;t=this.sandbox.dom.$(e.currentTarget),t.is("input")||(t=t.parent().find("input")),n=t.parents("tr").data("id"),t.attr("type")==="checkbox"?this.selectedItemIds.indexOf(n)>-1?(t.removeClass("is-selected").prop("checked",!1),$("th.select-all").find('input[type="checkbox"]').prop("checked",!1),this.selectedItemIds.splice(this.selectedItemIds.indexOf(n),1),this.sandbox.emit("husky.datagrid.item.deselect",n)):(t.addClass("is-selected").prop("checked",!0),n?(this.selectedItemIds.push(n),this.sandbox.emit("husky.datagrid.item.select",n)):this.sandbox.emit("husky.datagrid.item.select",e)):t.attr("type")==="radio"&&(r=this.selectedItemIds.pop(),!!r&&r>-1&&(this.sandbox.dom.$('tr[data-id="'+r+'"]').find('input[type="radio"]').removeClass("is-selected").prop("checked",!1),this.sandbox.emit("husky.datagrid.item.deselect",r)),t.addClass("is-selected").prop("checked",!0),n?(this.selectedItemIds.push(n),this.sandbox.emit("husky.datagrid.item.select",n)):this.sandbox.emit("husky.datagrid.item.select",e))},selectAllItems:function(e){e.stopPropagation(),this.sandbox.util.compare(this.selectedItemIds,this.allItemIds)?(this.$element.find('input[type="checkbox"]').prop("checked",!1),this.selectedItemIds=[],this.sandbox.emit("husky.datagrid.all.deselect",null)):(this.$element.find('input[type="checkbox"]').prop("checked",!0),this.selectedItemIds=this.allItemIds.slice(0),this.sandbox.emit("husky.datagrid.all.select",this.selectedItemIds))},addRow:function(e){var t;t=this.$element.find("table"),t.append(this.prepareTableRow(e))},prepareRemoveRow:function(e){if(!this.options.autoRemoveHandling){var t,n;t=this.sandbox.dom.$(e.currentTarget).parent().parent(),n=t.data("id"),n?this.sandbox.emit("husky.datagrid.row.remove-click",e,n):this.sandbox.emit("husky.datagrid.row.remove-click",e,t)}else this.removeRow(e)},removeRow:function(e){var t,n,r,i;typeof e=="object"?(t=this.sandbox.dom.$(e.currentTarget),n=t.parent().parent(),r=n.data("id")):(r=e,n=this.$element.find('tr[data-id="'+r+'"]')),i=this.selectedItemIds.indexOf(r),i>=0&&this.selectedItemIds.splice(i,1),this.sandbox.emit("husky.datagrid.row.removed",e),n.remove()},appendPagination:function(){return this.options.pagination&&this.$element.append(this.preparePagination()),this},preparePagination:function(){var e;return!!this.configs.total&&parseInt(this.configs.total,10)>=1&&(e=this.sandbox.dom.$("<div/>"),e.addClass("pagination"),e.append(this.preparePaginationPrevNavigation()),e.append(this.preparePaginationPageNavigation()),e.append(this.preparePaginationNextNavigation())),e},preparePaginationPageNavigation:function(){return this.templates.paginationPageNavigation({pageSize:this.options.paginationOptions.pageSize,selectedPage:this.configs.page})},preparePaginationNextNavigation:function(){return this.templates.paginationNextNavigation({next:this.options.pagination.next,selectedPage:this.configs.page,pageSize:this.configs.total})},preparePaginationPrevNavigation:function(){return this.templates.paginationPrevNavigation({prev:this.options.pagination.prev,selectedPage:this.configs.page})},changePage:function(e){var t,n;t=this.sandbox.dom.$(e.currentTarget),n=t.data("page"),this.addLoader(),this.load({url:this.options.url,page:n,success:function(){this.removeLoader()}.bind(this)}),this.sandbox.emit("husky.datagrid.page.change","change page"),this.sandbox.emit("husky.datagrid.update","update page")},bindDOMEvents:function(){!this.options.selectItem.type||this.options.selectItem.type!=="checkbox"?!!this.options.selectItem.type&&this.options.selectItem.type==="radio"&&this.$element.on("click",'tbody > tr input[type="radio"]',this.selectItem.bind(this)):(this.$element.on("click","tbody > tr span.custom-checkbox-icon",this.selectItem.bind(this)),this.$element.on("change",'tbody > tr input[type="checkbox"]',this.selectItem.bind(this)),this.$element.on("click","th.select-all",this.selectAllItems.bind(this))),this.$element.on("click","tbody > tr",function(e){if(!this.sandbox.dom.$(e.target).is("input")&&!this.sandbox.dom.$(e.target).is("span.icon-remove")){var t=this.sandbox.dom.$(e.currentTarget).data("id");t?this.sandbox.emit("husky.datagrid.item.click",t):this.sandbox.emit("husky.datagrid.item.click",e)}}.bind(this)),this.options.pagination&&this.$element.on("click",".pagination li.page",this.changePage.bind(this)),this.options.removeRow&&this.$element.on("click",".remove-row > span",this.prepareRemoveRow.bind(this))},bindCustomEvents:function(){this.sandbox.on("husky.datagrid.update",this.updateHandler.bind(this)),this.sandbox.on("husky.datagrid.row.add",this.addRow.bind(this)),this.sandbox.on("husky.datagrid.row.remove",this.removeRow.bind(this)),this.sandbox.on("husky.datagrid.items.get-selected",this.getSelectedItemsIds.bind(this)),this.sandbox.on("husky.datagrid.data.get",this.provideData.bind(this))},provideData:function(){this.sandbox.emit("husky.datagrid.data.provide",this.data)},updateHandler:function(){this.resetItemSelection()},render:function(){this.$originalElement.html(this.$element),this.bindCustomEvents(),this.bindDOMEvents()},addLoader:function(){return this.$element.outerWidth(this.$element.outerWidth()).outerHeight(this.$element.outerHeight()).empty()},removeLoader:function(){return this.$element.removeClass("is-loading")},getSelectedItemsIds:function(){this.sandbox.emit("husky.datagrid.items.selected",this.selectedItemIds)},templates:{removeRow:function(){return['<span class="icon-remove"></span>'].join("")},checkbox:function(e){var t,n;return e=e||{},t=e.id?' id="'+e.id+'"':"",n=e.name?' name="'+e.name+'"':"",["<input",t,n,' type="checkbox" class="custom-checkbox"/>','<span class="custom-checkbox-icon"></span>'].join("")},radio:function(e){var t,n;return e=e||{},t=e.id?' id="'+e.id+'"':"",n=e.name?' name="'+e.name+'"':"",["<input",t,n,' type="radio" class="custom-radio"/>','<span class="custom-radio-icon"></span>'].join("")},paginationPrevNavigation:function(e){var t;return e=e||{},t=parseInt(e.selectedPage,10),["<ul>",'<li class="pagination-first page" data-page="1"></li>','<li class="pagination-prev page" data-page="',t-1,'">',"Previous","</li>","</ul>"].join("")},paginationNextNavigation:function(e){var t,n,r,i;return e=e||{},t=e.next||"Next",n=e.last||"Last",r=e.pageSize||10,i=e.selectedPage?parseInt(e.selectedPage,10):0,["<ul>",'<li class="pagination-next page" data-page="',i+1,'">',t,"</li>",'<li class="pagination-last page" data-page="',r,'"></li>',"</ul>"].join("")},paginationPageNavigation:function(e){var t,n,r,i,s;e=e||{},t=e.pageSize||10,i=e.selectedPage?parseInt(e.selectedPage,10):0,r=[];for(n=1;n<=t;n++)s=i===n?'class="page is-selected"':'class="page"',r.push("<li ",s,' data-page="',n,'">',n,"</li>");return r.push('<li class="is-disabled">...</li>'),"<ul>"+r.join("")+"</ul>"}}}}),define("__component__$dialog@husky",["jquery"],function(e){var t,n={data:{footer:{buttonCancelText:"Cancel",buttonSubmitText:"Ok"}},backdrop:!0,backdropClick:!1,width:"550px",template:{content:"<h3><%= title %></h3><p><%= content %></p>",footer:'<button class="btn btn-gray" id="dialog-button-cancel"><%= buttonCancelText %></button><button class="btn btn-black" id="dialog-button-submit"><%= buttonSubmitText %></button>',header:""}},r={data:{footer:{buttonCancelText:"Ok"}},backdrop:!0,backdropClick:!1,width:"550px",template:{content:"<h3><%= title %></h3><p><%= content %></p>",footer:'<button class="btn btn-black" id="dialog-button-cancel"><%= buttonCancelText %></button>',header:""}};return{initialize:function(){t=this.sandbox,!this.options.templateType||this.options.templateType.toLowerCase()!=="okdialog"?this.options=this.sandbox.util.extend(!0,{},n,this.options):this.options=this.sandbox.util.extend(!0,{},r,this.options),this.$element=e('<div class="husky-dialog hidden fade"/>'),e(this.options.el).append(this.$element),this.init()},init:function(){t.logger.log("initialize",this),this.prepare(),this.bindDOMEvents(),this.bindCustomEvents(),this.show()},prepare:function(){this.$header=e('<div class="husky-dialog-header align-right"/>'),this.$content=e('<div class="husky-dialog-body" />'),this.$footer=e('<div class="husky-dialog-footer" />'),this.$element.append(this.$header),this.$element.append(this.$content),this.$element.append(this.$footer);var t=this.options.width,n=parseInt(this.options.width,10)/2;this.$element.css({width:t,"margin-left":"-"+n+"px"})},bindDOMEvents:function(){this.$element.off(),this.$element.on("click",".close",this.hide.bind(this)),this.$element.on("click","#dialog-button-cancel",this.cancel.bind(this)),this.$element.on("click","#dialog-button-submit",this.submit.bind(this))},bindCustomEvents:function(){t.on("husky.dialog.hide",this.hide.bind(this))},show:function(){this.data=this.options.data,this.template=this.options.template,this.$header.append(this.sandbox.template.parse(this.template.header,this.data.header)),this.$content.append(this.sandbox.template.parse(this.template.content,this.data.content)),this.$footer.append(this.sandbox.template.parse(this.template.footer,this.data.footer)),this.$element.show();if(this.options.backdrop){var t=e('<div id="husky-dialog-backdrop" class="husky-dialog-backdrop fade in"></div>');e("body").append(t),t.click(function(){this.options.backdropClick&&this.options.backdropClick===!0&&(this.trigger("dialog:backdrop:click",null),this.hide())}.bind(this))}},hide:function(){this.$element.hide(),this.options.backdrop&&e("#husky-dialog-backdrop ").remove(),this.template=null,this.data=null,this.$header.empty(),this.$content.empty(),this.$footer.empty()},cancel:function(){t.emit("husky.dialog.cancel")},submit:function(){t.emit("husky.dialog.submit")}}}),define("__component__$dropdown@husky",["jquery"],function(e){var t,n="Husky.Ui.DropDown",r={url:"",data:[],trigger:"",valueName:"name",setParentDropDown:!1,excludeItems:[],instanceName:"undefined",alignment:"left"};return{initialize:function(){t=this.sandbox,this.name=n,this.options=this.sandbox.util.extend({},r,this.options),this.$element=e('<div class="husky-drop-down"/>'),e(this.options.el).append(this.$element),this.init()},init:function(){t.logger.log("initialize",this),this.$dropDown=e('<div class="dropdown-menu" />'),this.$dropDownList=e("<ul/>"),this.$element.append(this.$dropDown),this.$dropDown.append(this.$dropDownList),this.hideDropDown(),this.options.setParentDropDown&&this.$element.parent().addClass("dropdown"),this.options.alignment==="right"&&this.$dropDown.addClass("dropdown-align-right"),this.bindDOMEvents(),this.bindCustomEvents(),this.prepareData()},bindDOMEvents:function(){this.$element.off(),this.options.trigger!==""?e(this.options.el).on("click",this.options.trigger,this.triggerClick.bind(this)):e(this.options.el).on("click",this.triggerClick.bind(this)),this.$dropDownList.on("click","li",function(t){var n=e(t.currentTarget),r=n.data("id");this.clickItem(r)}.bind(this))},bindCustomEvents:function(){this.sandbox.on(this.getEvent("toggle"),this.triggerClick.bind(this)),this.sandbox.on(this.getEvent("show"),this.showDropDown.bind(this)),this.sandbox.on(this.getEvent("hide"),this.hideDropDown.bind(this))},getEvent:function(e){return"husky.dropdown."+this.options.instanceName+"."+e},clickItem:function(e){this.options.data.forEach(function(n){if(n.id===e)return t.logger.log(this.name,"item.click: "+e,"success"),t.emit(this.getEvent("item.click"),n,this.$el),!1}.bind(this)),this.hideDropDown()},triggerClick:function(){this.toggleDropDown()},prepareData:function(){this.options.data.length>0?this.generateDropDown(this.options.data):this.loadData()},loadData:function(){var e=this.getUrl();this.sandbox.logger.log(this.name,"load: "+e),t.util.ajax({url:e,success:function(e){this.sandbox.logger.log(this.name,"load","success"),e.total>0&&e.items.length===e.total?this.options.data=e.items:this.options.data=[],this.generateDropDown(this.options.data)}.bind(this),error:function(){this.sandbox.logger.log(this.name,"load","error"),this.options.data=[],this.generateDropDown(this.options.data)}.bind(this)}),setTimeout(function(){this.sandbox.emit(this.getEvent("data.load"))}.bind(this),200)},generateDropDown:function(e){this.clearDropDown(),e.length>0?e.forEach(function(e){this.isVisible(e)&&this.$dropDownList.append('<li data-id="'+e.id+'">'+e[this.options.valueName]+"</li>")}.bind(this)):this.$dropDownList.append("<li>No data received</li>")},isVisible:function(e){var t=!0;return this.options.excludeItems.forEach(function(n){e.id===n.id&&(t=!1)}.bind(this)),t},clearDropDown:function(){this.$dropDown.children("ul").children("li").remove()},toggleDropDown:function(){this.sandbox.logger.log(this.name,"toggle dropdown"),this.$dropDown.toggle()},showDropDown:function(){this.sandbox.logger.log(this.name,"show dropdown"),this.$dropDown.show()},hideDropDown:function(){this.sandbox.logger.log(this.name,"hide dropdown"),this.$dropDown.hide()},getUrl:function(){return this.options.url}}}),define("__component__$matrix@husky",[],function(){var e,t="is-active";return{initialize:function(){e=this.sandbox,this.$element=e.dom.createElement('<div class="husky-matrix"/>'),this.prepare(),e.dom.append(this.$el,this.$element),this.bindDOMEvents(),this.bindCustomEvents()},bindDOMEvents:function(){e.dom.on(this.$element,"click",this.toggleIcon.bind(this),'tbody > tr > td:has(span[class^="icon-"])'),e.dom.on(this.$element,"click",this.setRowActive.bind(this),"tbody > tr > td:last-child")},bindCustomEvents:function(){e.on("husky.matrix.set-all",this.setAllActive.bind(this)),e.on("husky.matrix.unset-all",this.unsetAllActive.bind(this))},toggleIcon:function(n){var r=n.currentTarget;r=e.dom.find('span[class^="icon-"]',r),e.dom.toggleClass(r,t),e.emit("husky.matrix.changed",{section:e.dom.data(r,"section"),value:e.dom.data(r,"value"),activated:e.dom.hasClass(r,t)})},setRowActive:function(n){var r=e.dom.parent(n.currentTarget),i=e.dom.find('span[class^="icon-"]',r);e.dom.addClass(i,t),e.emit("husky.matrix.changed",{section:e.dom.data(i,"section"),value:this.options.values.horizontal,activated:!0})},setAllActive:function(){var n=e.dom.find('span[class^="icon-"]',this.$element),r=e.dom.find("tbody > tr",this.$element);e.dom.addClass(n,t),e.dom.each(r,function(t,n){e.emit("husky.matrix.changed",{section:e.dom.data(e.dom.find("td.section",n),"section"),value:this.options.values.horizontal,activated:!0})}.bind(this))},unsetAllActive:function(){var n=e.dom.find('span[class^="icon-"]',this.$element),r=e.dom.find("tbody > tr",this.$element);e.dom.removeClass(n,t),e.dom.each(r,function(t,n){e.emit("husky.matrix.changed",{section:e.dom.data(e.dom.find("td.section",n),"section"),value:this.options.values.horizontal,activated:!1})}.bind(this))},prepare:function(){this.$element.append(this.prepareTable())},prepareTable:function(){var t;return t=e.dom.createElement('<table class="table matrix"/>'),e.dom.append(t,this.prepareTableHead()),!this.options.captions.vertical||e.dom.append(t,this.prepareTableBody()),t},prepareTableHead:function(){var t=e.dom.createElement("<thead/>"),n=e.dom.createElement("<tr/>"),r=e.dom.createElement('<th class="section"/>'),i,s;return!this.options.captions.general||(i=e.dom.createElement('<th class="general"/>'),e.dom.html(i,this.options.captions.general),e.dom.append(n,i)),e.dom.html(r,this.options.captions.type),e.dom.append(n,r),typeof this.options.captions.horizontal=="string"?(s=e.dom.createElement("<th/>",{colspan:this.options.values.horizontal.length}),e.dom.html(s,this.options.captions.horizontal),e.dom.append(n,s)):this.options.captions.horizontal.forEach(function(t){var r=e.dom.createElement("<th/>");e.dom.html(r,t),e.dom.append(n,r)}),e.dom.append(n,e.dom.createElement("<th/>")),e.dom.append(t,n),t},prepareTableBody:function(){var n=e.dom.createElement("<tbody/>"),r,i,s,o,u,a,f;for(r=0;r<this.options.captions.vertical.length;r++){i=e.dom.createElement("<tr/>"),s=e.dom.createElement('<td class="section"/>'),o=e.dom.createElement('<td class="all"/>'),!this.options.captions.general||e.dom.append(i,e.dom.createElement("<td/>")),e.dom.html(s,this.options.captions.vertical[r]),e.dom.data(s,"section",this.options.values.vertical[r]),e.dom.append(i,s);for(u=0;u<this.options.values.horizontal.length;u++)a=e.dom.createElement('<td class="value"/>'),f=e.dom.createElement('<span class="icon-'+this.options.values.horizontal[u]+'"/>'),e.dom.data(f,"value",this.options.values.horizontal[u]),e.dom.data(f,"section",this.options.values.vertical[r]),!this.options.data[r][u]||e.dom.addClass(f,t),e.dom.append(a,f),e.dom.append(i,a);e.dom.html(o,"All"),e.dom.append(i,o),e.dom.append(n,i)}return n}}}),define("__component__$select@husky",[],function(){var e={url:"",data:[],valueName:"name",selected:null,defaultItem:{id:1},instanceName:"undefined"};return{view:!0,initialize:function(){this.sandbox.logger.log("initialized select"),this.options=this.sandbox.util.extend(!0,{},e,this.options),this.configs={},this.$originalElement=this.sandbox.dom.$(this.options.el),this.$select=$('<select class="select-value form-element"/>'),this.$element=this.sandbox.dom.$('<div class="husky-select"/>'),this.$element.append(this.$select),this.$originalElement.append(this.$element),this.prepareData(),this.bindDOMEvents()},bindDOMEvents:function(){this.$element.off(),this.$select.on("change",function(){var e=this.$select.val();this.sandbox.logger.log("changed: "+e),this.sandbox.emit("select."+this.options.instanceName+".item.changed",e)}.bind(this))},prepareData:function(){this.options.data.length>0?this.generateOptions(this.options.data):this.loadData()},loadData:function(){this.sandbox.logger.log("load: "+this.options.url),this.sandbox.util.ajax({url:this.options.url,success:function(e){this.sandbox.logger.log("load","success"),e.total>0&&e.items.length===e.total?this.options.data=e.items:this.options.data=[],this.generateOptions(this.options.data)}.bind(this),error:function(){this.sandbox.logger.log("load","error"),this.options.data=[],this.generateOptions(this.options.data)}.bind(this)}),setTimeout(function(){this.sandbox.emit("select."+this.options.instanceName+".loadData")}.bind(this),200)},generateOptions:function(e){this.clearOptions(),e.forEach(this.generateOption.bind(this))},generateOption:function(e){var t=$('<option value="'+e.id+'">'+e[this.options.valueName]+"</option>");(this.options.selected!==null&&this.options.selected.id===e.id||this.options.selected===null&&this.options.defaultItem.id===e.id)&&t.attr("selected",!0),this.$select.append(t)},clearOptions:function(){this.$select.find("option").remove()}}}),define("__component__$auto-complete@husky",[],function(){var e={url:"",valueName:"name",minLength:3,keyControl:!0,value:null,excludeItems:[]},t=[],n="husky-auto-complete-success",r="husky-auto-complete-error",i="husky-auto-complete-loading";return{getEvent:function(e){return"husky.auto-complete."+e},getUrl:function(e){var t="?";return this.options.url.indexOf("?")!==-1&&(t="&"),this.options.url+t+"search="+e},getValueID:function(){return this.options.value?this.options.value.id:null},getValueName:function(){return this.options.value?this.options.value[this.options.valueName]:""},initialize:function(){this.sandbox.logger.log("initialize",this),this.sandbox.logger.log(arguments),this.options=this.sandbox.util.extend({},e,this.options),this.render()},render:function(){this.$el.addClass("dropdown husky-auto-complete"),this.$valueField=$('<input type="text" autofill="false" class="name-value form-element husky-validate" data-id="'+this.getValueID()+'" value="'+this.getValueName()+'"/>'),this.$dropDown=$('<div class="dropdown-menu" />'),this.$dropDownList=$("<ul/>"),this.$el.append(this.$valueField),this.$el.append(this.$dropDown),this.$dropDown.append(this.$dropDownList),this.hideDropDown(),this.bindDOMEvents(),!this.options.value||this.successState()},bindDOMEvents:function(){this.$el.off(),this.$valueField.on("input",this.inputChanged.bind(this)),this.$dropDownList.on("click","li",function(e){var t=$(e.currentTarget),n=t.data("id"),r={id:n};r[this.options.valueName]=t.text(),this.selectItem(r)}.bind(this)),this.$valueField.on("focusin",function(){this.$valueField.trigger("input")}.bind(this)),this.$valueField.on("focusout",function(){setTimeout(function(){this.hideDropDown()}.bind(this),250)}.bind(this)),this.options.keyControl&&(this.$valueField.on("keydown",function(e){if([40,38,13].indexOf(e.which)===-1)return;e.preventDefault(),this.$dropDown.is(":visible")?e.which===40?this.pressKeyDown():e.which===38?this.pressKeyUp():e.which===13&&this.pressKeyEnter():(this.noState(),this.loadData(this.$valueField.val()))}.bind(this)),this.$dropDownList.on("mouseover","li",function(){this.$dropDownList.children().removeClass("hover")}.bind(this)))},inputChanged:function(){this.sandbox.logger.log("inputChanged"),this.noState();var e=this.$valueField.val();e.length>=this.options.minLength&&this.loadData(e)},loadData:function(e){var n=this.getUrl(e);this.sandbox.logger.log("load: "+n),this.loadingState(),$.ajax({url:n,success:function(e){this.sandbox.logger.log("load","success"),this.noState(),this.updateData(e.items),t.length>1?this.generateDropDown(t):t.length===1?this.selectItem(t[0]):(this.failState(),this.hideDropDown())}.bind(this),error:function(){this.sandbox.logger.log("load","error"),this.failState(),this.hideDropDown()}.bind(this)}),this.sandbox.emit(this.getEvent("load-data"))},updateData:function(e){t=[],!!e&&$.isArray(e)&&e.forEach(function(e){this.isVisible(e)&&t.push(e)}.bind(this))},generateDropDown:function(e){this.clearDropDown(),e.forEach(function(e){this.isVisible(e)&&this.$dropDownList.append('<li data-id="'+e.id+'">'+e[this.options.valueName]+"</li>")}.bind(this)),this.showDropDown()},isVisible:function(e){var t=!0;return this.options.excludeItems.forEach(function(n){parseInt(e.id,10)===parseInt(n.id,10)&&(t=!1)}.bind(this)),t},clearDropDown:function(){this.$dropDown.children("ul").children("li").remove()},showDropDown:function(){this.sandbox.logger.log("show dropdown"),this.$dropDown.show()},hideDropDown:function(){this.sandbox.logger.log("hide dropdown"),this.clearDropDown(),this.$dropDown.hide()},successState:function(){this.sandbox.logger.log("set success"),this.clearDropDown(),this.$el.parent().removeClass(r),this.$el.parent().removeClass(i),this.$el.parent().addClass(n)},noState:function(){this.sandbox.logger.log("remove success and fail"),this.$valueField.data(""),this.$el.parent().removeClass(r),this.$el.parent().removeClass(i),this.$el.parent().removeClass(n)},failState:function(){this.sandbox.logger.log("set fail"),this.$el.parent().addClass(r),this.$el.parent().removeClass(i),this.$el.parent().removeClass(n)},loadingState:function(){this.sandbox.logger.log("set loading"),this.$el.parent().removeClass(r),this.$el.parent().addClass(i),this.$el.parent().removeClass(n)},pressKeyDown:function(){this.sandbox.logger.log("key down");var e=this.$dropDownList.children(".hover"),t=e.next();t.length===0&&(t=this.$dropDownList.children().first()),e.removeClass("hover"),t.addClass("hover")},pressKeyUp:function(){this.sandbox.logger.log("key up");var e=this.$dropDownList.children(".hover"),t=e.prev();t.length===0&&(t=this.$dropDownList.children().last()),e.removeClass("hover"),t.addClass("hover")},pressKeyEnter:function(){this.sandbox.logger.log("key enter");var e=this.$dropDownList.children(".hover"),t,n,r,i;e.length===1?(t={id:e.data("id")},t[this.options.valueName]=e.text(),this.selectItem(t)):(n=this.$valueField.val(),r=this.$dropDownList.children(),i=this,$(r).each(function(){if($(this).text()===n){var e={id:$(this).data("id")};return e[i.options.valueName]=$(this).text(),i.selectItem(e),!1}}))},selectItem:function(e){this.sandbox.logger.log("select item: "+e.id),this.$valueField.data("id",e.id),this.$valueField.val(e[this.options.valueName]),this.hideDropDown(),this.successState()}}}),function(){window.Backbone?define("backbone",[],function(){return window.Backbone}):require.config({paths:{backbone:"vendor/backbone/backbone"},shim:{backbone:{exports:"Backbone",deps:["underscore","jquery"]}}}),define("husky_extensions/backbone",["backbone"],{name:"Backbone",initialize:function(e){var t=e.core,n=e.sandbox,r=e.sandbox.util._,i={};t.mvc=require("backbone"),n.mvc={},n.mvc.routes=[],n.mvc.Router=function(e){return t.mvc.Router.extend(e)},n.mvc.View=function(e){return t.mvc.View.extend(e)},n.mvc.Model=function(e){return t.mvc.Model.extend(e)},n.mvc.Collection=function(e){return t.mvc.Collection.extend(e)},define("mvc/view",function(){return n.mvc.View}),define("mvc/model",function(){return n.mvc.Model}),define("mvc/collection",function(){return n.mvc.Collection}),e.components.before("initialize",function(e){if(!this)throw new Error("Missing context!");if(!!this.view){var t=i[e.ref],s;t||(s=r.pick(this,"model","collection","id","attributes","className","tagName","events"),i[e.ref]=t=n.mvc.View(s)),this.view=new t({el:this.$el}),this.view.sandbox=this.sandbox,this.view.parent=this}}),e.components.before("remove",function(){if(!this)throw new Error("Missing context!");this.view&&this.view.stopListening()})},afterAppStart:function(e){e.sandbox.util._.delay(function(){e.core.mvc.History.started||e.core.mvc.history.start()},250)}})}(),define("husky_extensions/collection",[],function(){var e={byId:{},objs:[],add:function(e){this.byId[e.id]=e,this.objs.push(e)},get:function(e){return this.byId[e.id||e]}};return{name:"Collection",initialize:function(t){t.sandbox.data.Collection=e}}}),function(){require.config({paths:{globalize_lib:"vendor/globalize/lib/globalize",cultures:"vendor/globalize/lib/cultures"}}),define("husky_extensions/globalize",["globalize_lib"],function(){return{name:"husky-validation",initialize:function(e){e.sandbox.globalize={addCultureInfo:function(e,t){Globalize.addCultureInfo(e,{messages:t})},culture:function(e){require(["cultures/globalize.culture."+e],function(){Globalize.culture(e)}.bind(this))}},e.sandbox.translate=function(t){if(!e.config.culture||!e.config.culture.name)return t;var n=Globalize.localize(t,e.config.culture.name);return n?n:t},e.setLanguage=function(t,n){require(["cultures/globalize.culture."+t],function(){Globalize.culture(t),e.sandbox.globalize.addCultureInfo(t,n)}.bind(this))}},afterAppStart:function(e){!!e.config.culture&&!!e.config.culture&&(!e.config.culture.messages||(e.config.culture.messages={}),e.setLanguage(e.config.culture.name,e.config.culture.messages))}}})}(),function(){require.config({paths:{form:"vendor/husky-validation/dist/validation"}}),define("husky_extensions/husky-validation",["form"],function(e){return{name:"husky-validation",initialize:function(t){t.sandbox.form={create:function(t,n){return new e($(t),n)},getObject:function(e){if(typeof e=="string")return $(e).data("form-object");if(typeof e=="object")return e;throw"Not supported"},validate:function(e,n){return n||(n=!1),t.sandbox.form.getObject(e).validation.validate(n)},isValid:function(e){return t.sandbox.form.getObject(e).validation.isValid()},addField:function(e,n){return t.sandbox.form.getObject(e).addField(n)},removeField:function(e,n){return t.sandbox.form.getObject(e).removeField(n)},addConstraint:function(e,n,r,i){t.sandbox.form.getObject(e).validation.addConstraint(n,r,i)},updateConstraint:function(e,n,r,i){t.sandbox.form.getObject(e).validation.updateConstraint(n,r,i)},deleteConstraint:function(e,n,r){t.sandbox.form.getObject(e).validation.deleteConstraint(n,r)},setData:function(e,n){t.sandbox.form.getObject(e).mapper.setData(n)},getData:function(e){return t.sandbox.form.getObject(e).mapper.getData()},element:{getObject:function(e){return $(e).data("element")},validate:function(e,n){t.sandbox.form.element.getObject(e).validate(n)},addConstraint:function(e,n,r){t.sandbox.form.element.getObject(e).addConstraint(n,r)},updateConstraint:function(e,n,r){t.sandbox.form.element.getObject(e).updateConstraint(n,r)},deleteConstraint:function(e,n){t.sandbox.form.element.getObject(e).deleteConstraint(n)}}}}}})}(),function(){window.jQuery?define("jquery",[],function(){return window.jQuery}):require.config({paths:{backbone:"vendor/jquery/jquery"},shim:{backbone:{exports:"$"}}}),define("husky_extensions/jquery",["jquery"],{name:"jQuery",initialize:function(e){e.core.dom.window=window,e.core.dom.$window=$(window),e.core.dom.document=document,e.core.dom.$document=$(document),e.core.dom.$=$,e.core.dom.createElement=function(e,t){return t=t||{},$(e,t)},e.core.dom.html=function(e,t){return $(e).html(t)},e.core.dom.each=function(e,t){$(e).each(t)},e.core.dom.append=function(e,t){return $(e).append(t)},e.core.dom.css=function(e,t,n){return n?$(e).css(t,n):$(e).css(t)},e.core.dom.addClass=function(e,t){return $(e).addClass(t)},e.core.dom.removeClass=function(e,t){return $(e).removeClass(t)},e.core.dom.toggleClass=function(e,t){return $(e).toggleClass(t)},e.core.dom.hasClass=function(e,t){return $(e).hasClass(t)},e.core.dom.parent=function(e){return $(e).parent()},e.core.dom.width=function(e){return $(e).width()},e.core.dom.height=function(e){return $(e).height()},e.core.dom.remove=function(e){return $(e).remove()},e.core.dom.attr=function(e,t){return t=t||{},$(e).attr(t)},e.core.dom.is=function(e,t){return $(e).is(t)},e.core.dom.data=function(e,t,n){return n?$(e).data(t,n):$(e).data(t)},e.core.dom.onReady=function(e){$(window).on("load",e)},e.core.dom.val=function(e){return $(e).val()},e.core.dom.on=function(e,t,n,r){r?$(e).on(t,r,n):$(e).on(t,n)},e.core.dom.one=function(e,t,n,r){r?$(e).one(t,r,n):$(e).one(t,n)},e.core.dom.toggleClass=function(e,t){$(e).toggleClass(t)},e.core.dom.parent=function(e,t){return $(e).parent(t)},e.core.dom.next=function(e,t){return $(e).next(t)},e.core.dom.prev=function(e,t){return $(e).prev(t)},e.core.dom.text=function(e,t){return $(e).text(t)},e.core.dom.hide=function(e){return $(e).hide()},e.core.dom.show=function(e){return $(e).show()},e.core.util.ajax=$.ajax}})}(),define("husky_extensions/model",[],function(){var e={get:function(e){return this[e]},set:function(e,t){return!!t&&(this[e]=t),this}};return{name:"Model",initialize:function(t){t.sandbox.data.Model=e}}}),define("husky_extensions/template",["underscore","jquery"],function(e,t){function n(t){this.options=e.defaults(t||{},{type:"html",compiler:e.template,lookup:[],components:"aura_components"}),this.cache={},this.options.lookup.push(this.cache)}return n.prototype={load:function(n,r){n=e.isString(n)?[n]:n;var i={},s=[],o,u;return e.each(n,function(e){var t=this.find(r+"/"+e);t?i[e]=t:s.push(e)},this),o=new t.Deferred,s.length?(u=e.map(s,function(e){var t=e+"."+this.options.type;return e.indexOf("/")!==0,"text!"+t},this),require(u,e.bind(function(){e.each(Array.prototype.slice.call(arguments),function(e,t){i[s[t]]=this.options.compiler(e),this.cache[r+"/"+name]=this.options.compiler(e)},this),o.resolve(i)},this),function(e){o.reject(e)})):o.resolve(i),o.promise()},find:function(n,r){r=r||"aura";var i=t("script[data-"+r+'-template="'+n+'"]').html(),s;return i?this.options.compiler(i):(s=e.find(this.options.lookup,function(e){return!!e[n]})||{},s[n])}},function(t){var r=new n(t.config.template);t.core.Components.Base.prototype.renderTemplate=function(e,t){if(typeof this.loadedTemplates[e]=="function"){var n=this.loadedTemplates[e],r=new RegExp("(###\\w*###)","gi"),i=n(t),s=i.match(r);return!s||this.sandbox.util.each(s,function(e,t){e=t.replace(/#/g,""),i=i.replace(new RegExp(t,"g"),this.sandbox.translate(e))}.bind(this)),i}return"Template "+e+" not found."},t.components.before("initialize",function(){this.loadedTemplates={};if(!this.templates||!this.templates.length)return;var t=r.load(this.templates,this.options.name);return t.done(e.bind(function(e){this.loadedTemplates=e},this)),t.promise()})}}),define("husky_extensions/util",[],function(){return{name:"Util",initialize:function(e){e.core.util.compare=function(e,t){if(this.typeOf(e)==="array"&&this.typeOf(t)==="array")return JSON.stringify(e)===JSON.stringify(t)},e.core.util.typeOf=function(e){var t=typeof e;return t==="object"&&(e?e instanceof Array&&(t="array"):t="null"),t}}}});